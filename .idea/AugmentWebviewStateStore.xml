<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiIzZmZjODhjYS03YjNiLTQ0MTgtOTBjMi1iOTkxYzUxMmJkOTMiLCJjb252ZXJzYXRpb25zIjp7IjI1N2M4ZDk5LTkzZDAtNGVlNi05MDgwLTIwZTdjNjU4ODFkNyI6eyJpZCI6IjI1N2M4ZDk5LTkzZDAtNGVlNi05MDgwLTIwZTdjNjU4ODFkNyIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDQtMDRUMjI6NTM6NDEuODIxWiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA0LTA0VDIyOjUzOjQxLjgyMVoiLCJjaGF0SGlzdG9yeSI6W10sImZlZWRiYWNrU3RhdGVzIjp7fSwidG9vbFVzZVN0YXRlcyI6e30sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjpmYWxzZSwiZXh0cmFEYXRhIjp7Imhhc0RpcnR5RWRpdHMiOmZhbHNlfX0sIjNmZmM4OGNhLTdiM2ItNDQxOC05MGMyLWI5OTFjNTEyYmQ5MyI6eyJpZCI6IjNmZmM4OGNhLTdiM2ItNDQxOC05MGMyLWI5OTFjNTEyYmQ5MyIsIm5hbWUiOiJXZWxjb21lIHRvIHRoZSBBdWdtZW50IEFnZW50IiwiY3JlYXRlZEF0SXNvIjoiMjAyNS0wNC0wNFQyMjo1Mzo1NS43NzRaIiwibGFzdEludGVyYWN0ZWRBdElzbyI6IjIwMjUtMDQtMDRUMjI6NTU6NTguMzE0WiIsImNoYXRIaXN0b3J5IjpbeyJyZXF1ZXN0X2lkIjoiMjU2MDcyNGMtMmQ5MS00M2FhLWJkYzUtMmQ4MmIyYzk3MjY1IiwidXVpZCI6ImM3YjgyZTZhLWNhYjgtNDE3ZC05ZjMzLTg1NzIzZjlkN2Q5NiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MCwidG9UaW1lc3RhbXAiOjE3NDM4MDcyMzU3NzUsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjEwMTkzMTFjLTRiYTMtNGEwNi1hZTQ2LTkxNDRmNGM2MTdmYiIsInJlcXVlc3RfbWVzc2FnZSI6ImFkZCBnZXR0ZXIgZm9yIGludmVudG9yeW1hbmFnZXIiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiYWRkIGdldHRlciBmb3IgaW52ZW50b3J5bWFuYWdlciJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxQjFvbmhVeXZBVEt2UUd6QkN3YzdLayIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkknbGwgaGVscCB5b3UgYWRkIGEgZ2V0dGVyIGZvciB0aGUgSW52ZW50b3J5TWFuYWdlciBpbiB0aGUgRGV2U3lzdGVtIGNsYXNzLiBMZXQncyBmaXJzdCBleGFtaW5lIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBEZXZTeXN0ZW0uamF2YSBmaWxlIHRvIHVuZGVyc3RhbmQgaXRzIHN0cnVjdHVyZSBhbmQgaG93IHRvIHByb3Blcmx5IGltcGxlbWVudCB0aGUgZ2V0dGVyLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJhZGQgZ2V0dGVyIGZvciBpbnZlbnRvcnltYW5hZ2VyIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkknbGwgaGVscCB5b3UgYWRkIGEgZ2V0dGVyIGZvciB0aGUgSW52ZW50b3J5TWFuYWdlciBpbiB0aGUgRGV2U3lzdGVtIGNsYXNzLiBMZXQncyBmaXJzdCBleGFtaW5lIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBEZXZTeXN0ZW0uamF2YSBmaWxlIHRvIHVuZGVyc3RhbmQgaXRzIHN0cnVjdHVyZSBhbmQgaG93IHRvIHByb3Blcmx5IGltcGxlbWVudCB0aGUgZ2V0dGVyLlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImRiODQ4NzQ1LTEyYTYtNDUyZS05MzdjLTg0MWRiZTk1NGNmNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVBEQzI4U00zMlVDV2Zjb0hINDh6dXQiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIlNob3cgbWUgdGhlIEludmVudG9yeU1hbmFnZXIgY2xhc3MgZGVmaW5pdGlvbiBhbmQgaXRzIGtleSBtZXRob2RzXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3csIGxldCdzIGNoZWNrIHRoZSBJbnZlbnRvcnlNYW5hZ2VyIGNsYXNzIHRvIHVuZGVyc3RhbmQgaXRzIHN0cnVjdHVyZSBhbmQgdXNhZ2U6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9EZXZTeXN0ZW0uamF2YTpcbiAgICAgMVx0cGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyLkludmVudG9yeU1hbmFnZXI7XG4gICAgIDRcdGltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5qYXZhLkphdmFQbHVnaW47XG4gICAgIDVcdFxuICAgICA2XHRpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG4gICAgIDdcdFxuICAgICA4XHRwdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XG4gICAgIDlcdFxuICAgIDEwXHRcbiAgICAxMVx0XG4gICAgMTJcdCAgICBAT3ZlcnJpZGVcbiAgICAxM1x0ICAgIHB1YmxpYyB2b2lkIG9uRW5hYmxlKCkge1xuICAgIDE0XHQgICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlciA9IG5ldyBJbnZlbnRvcnlNYW5hZ2VyKHRoaXMsIG5ldyBIYXNoTWFwPD4oKSk7XG4gICAgMTVcdFxuICAgIDE2XHQgICAgfVxuICAgIDE3XHRcbiAgICAxOFx0ICAgIEBPdmVycmlkZVxuICAgIDE5XHQgICAgcHVibGljIHZvaWQgb25EaXNhYmxlKCkge1xuICAgIDIwXHQgICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgIDIxXHQgICAgfVxuICAgIDIyXHR9XG4gICAgMjNcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMjNcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUIxb25oVXl2QVRLdlFHekJDd2M3S2sifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTm93LCBsZXQncyBjaGVjayB0aGUgSW52ZW50b3J5TWFuYWdlciBjbGFzcyB0byB1bmRlcnN0YW5kIGl0cyBzdHJ1Y3R1cmUgYW5kIHVzYWdlOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImJhNDIzNTA0LTU0YjEtNDVlYS1hZmNmLWQxOWRlM2VjZDhlMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVlWN3lNZWhjY2g5TXFNQmgyN3dNZlMiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIlNob3cgbWUgYW55IGRlY2xhcmF0aW9ucyBvciByZWZlcmVuY2VzIHRvIGludmVudG9yeU1hbmFnZXIgaW4gdGhlIERldlN5c3RlbSBjbGFzc1wifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IEkgbmVlZCB0byBjaGVjayBpZiB0aGUgYGludmVudG9yeU1hbmFnZXJgIGZpZWxkIGlzIGFscmVhZHkgZGVjbGFyZWQgaW4gdGhlIERldlN5c3RlbSBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaW52L2NvbnRyb2xsZXIvSW52ZW50b3J5TWFuYWdlci5qYXZhXG5wYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyO1xuXG5pbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LlN0ZXlPbkludjtcbmltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuU3RleU9uSW52O1xuaW1wb3J0IG9yZy5idWtraXQucGx1Z2luLlBsdWdpbjtcblxuaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuaW1wb3J0IGphdmEudXRpbC5VVUlEO1xuXG5wdWJsaWMgY2xhc3MgSW52ZW50b3J5TWFuYWdlciB7XG5cbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBIYXNoTWFwPFVVSUQsIFN0ZXlPbkludj4gY2FjaGU7XG5cbiAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlcihQbHVnaW4gbWFpbkNsYXNzLCBIYXNoTWFwPFVVSUQsIFN0ZXlPbkludj4gY2FjaGUpIHtcbiAgICAgICAgdGhpcy5tYWluQ2xhc3MgPSBtYWluQ2xhc3M7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBvcGVuKFVVSUQgdXVpZCwgU3RleU9uSW52IFN0ZXlPbkludikge1xuICAgICAgICB0aGlzLmNhY2hlLnB1dCh1dWlkLCBTdGV5T25JbnYpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGFkZChVVUlEIHV1aWQsIFN0ZXlPbkludiBTdGV5T25JbnYpIHtcbiAgICAgICAgY2FjaGUucHV0KHV1aWQsIFN0ZXlPbkludik7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgcmVtb3ZlKFVVSUQgdXVpZCkge1xuICAgICAgICBjYWNoZS5yZW1vdmUodXVpZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKSB7XG4gICAgICAgIGNhY2hlLmNsZWFyKCk7XG4gICAgfVxuXG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9SaW9uSW52LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUmlvbkludiB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBJbnZlbnRvcnkgaW52ZW50b3J5O1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEFycmF5TGlzdDxBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcztcbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbGF5ZXIgcGxheWVyO1xuICAgIHByaXZhdGUgZmluYWwgaW50IHNpemU7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQ29tcG9uZW50IHRpdGxlO1xuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IG9wZW5BY3Rpb247XG4gICAgcHJpdmF0ZSBJbnZlbnRvcnlFdmVudExpc3RlbmVyIGxpc3RlbmVyO1xuICAgIEBHZXR0ZXJcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gY2xvc2VBY3Rpb247XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgU3RyaW5nW10gcGF0dGVybjtcblxuICAgIHB1YmxpYyBSaW9uSW52KFBsdWdpbiBtYWluQ2xhc3MsIGludCBzaXplLCBDb21wb25lbnQgdGl0bGUsIFBsYXllciBwbGF5ZXIsIFN0cmluZ1tdIHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5tYWluQ2xhc3MgPSBtYWluQ2xhc3M7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkgPSB0aGlzLm1haW5DbGFzcy5nZXRTZXJ2ZXIoKS5jcmVhdGVJbnZlbnRvcnkocGxheWVyLCBzaXplLCB0aXRsZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciA9IG5ldyBJbnZlbnRvcnlFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkNsYXNzLmdldFNlcnZlcigpLmdldFBsdWdpbk1hbmFnZXIoKS5yZWdpc3RlckV2ZW50cyhsaXN0ZW5lciwgbWFpbkNsYXNzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBhZGRJdGVtKEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSkge1xuICAgICAgICBpbnZlbnRvcnkuYWRkSXRlbShhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKTtcbiAgICAgICAgYWN0aXZlSXRlbXMuYWRkKGFjdGl2ZUl0ZW0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbk9wZW4oQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5vcGVuQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbkNsb3NlKENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICB0aGlzLmNsb3NlQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZUl0ZW0oaW50IHNsb3QpIHtcbiAgICAgICAgYWN0aXZlSXRlbXMucmVtb3ZlSWYoaXRlbSAtPiBpdGVtLmdldEl0ZW1TdGFjaygpLmVxdWFscyhpbnZlbnRvcnkuZ2V0SXRlbShzbG90KSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIG9wZW4oUGxheWVyIHBsYXllcikge1xuICAgICAgICBwbGF5ZXIub3BlbkludmVudG9yeShpbnZlbnRvcnkpO1xuICAgICAgICBpZiAob3BlbkFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBJbnZlbnRvcnlPcGVuRXZlbnQgb3BlbkV2ZW50ID0gbmV3IEludmVudG9yeU9wZW5FdmVudChwbGF5ZXIuZ2V0T3BlbkludmVudG9yeSgpKTtcbiAgICAgICAgICAgIG9wZW5BY3Rpb24uYWNjZXB0KG9wZW5FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJdGVtKGludCBzbG90LCBBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgaW52ZW50b3J5LnNldEl0ZW0oc2xvdCwgYWN0aXZlSXRlbS5nZXRJdGVtU3RhY2soKSk7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLmFkZChhY3RpdmVJdGVtKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNsaWNrKEludmVudG9yeUNsaWNrRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgZm9yIChBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0gOiBhY3RpdmVJdGVtcykge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmdldEN1cnJlbnRJdGVtKCkgIT0gbnVsbCAmJiBldmVudC5nZXRDdXJyZW50SXRlbSgpLmlzU2ltaWxhcihhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKSAmJiBhY3RpdmVJdGVtLmdldEFjdGlvbigpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmdldEFjdGlvbigpLmFjY2VwdChldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBoYW5kbGVDbG9zZShJbnZlbnRvcnlDbG9zZUV2ZW50IGV2ZW50KSB7XG4gICAgICAgIGlmIChjbG9zZUFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbG9zZUFjdGlvbi5hY2NlcHQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VW5BY3RpdmVJdGVtcyhIYXNoTWFwPENoYXJhY3RlciwgQWN0aXZlSXRlbT4gYWN0aXZlSXRlbXMpIHtcblxuICAgICAgICBpbnQgc3RhcnRJbmRleCA9IDA7XG5cbiAgICAgICAgZm9yIChTdHJpbmcgcm93IDogcGF0dGVybikge1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+PSBzaXplKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcm93Lmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjaGFyIGMgPSByb3cuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtcy5jb250YWluc0tleShjKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJdGVtKHN0YXJ0SW5kZXggKyBpLCBhY3RpdmVJdGVtcy5nZXQoYykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnRJbmRleCArPSA5O1xuICAgICAgICB9XG5cbiAgICB9XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaW52L1N0ZXlPbkludi5qYXZhXG5wYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludjtcblxuaW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyLkludmVudG9yeUV2ZW50TGlzdGVuZXI7XG5pbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52Lml0ZW0uQWN0aXZlSXRlbTtcbmltcG9ydCBsb21ib2suR2V0dGVyO1xuaW1wb3J0IG5ldC5reW9yaS5hZHZlbnR1cmUudGV4dC5Db21wb25lbnQ7XG5pbXBvcnQgb3JnLmJ1a2tpdC5lbnRpdHkuUGxheWVyO1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuaW52ZW50b3J5LkludmVudG9yeUNsaWNrRXZlbnQ7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5pbnZlbnRvcnkuSW52ZW50b3J5Q2xvc2VFdmVudDtcbmltcG9ydCBvcmcuYnVra2l0LmV2ZW50LmludmVudG9yeS5JbnZlbnRvcnlPcGVuRXZlbnQ7XG5pbXBvcnQgb3JnLmJ1a2tpdC5pbnZlbnRvcnkuSW52ZW50b3J5O1xuaW1wb3J0IG9yZy5idWtraXQuaW52ZW50b3J5Lkl0ZW1TdGFjaztcbmltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5QbHVnaW47XG5cbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuaW1wb3J0IGphdmEudXRpbC5mdW5jdGlvbi5Db25zdW1lcjtcblxucHVibGljIGNsYXNzIFN0ZXlPbkludiB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBJbnZlbnRvcnkgaW52ZW50b3J5O1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEFycmF5TGlzdDxBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcztcbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbGF5ZXIgcGxheWVyO1xuICAgIHByaXZhdGUgZmluYWwgaW50IHNpemU7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQ29tcG9uZW50IHRpdGxlO1xuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IG9wZW5BY3Rpb247XG4gICAgcHJpdmF0ZSBJbnZlbnRvcnlFdmVudExpc3RlbmVyIGxpc3RlbmVyO1xuICAgIEBHZXR0ZXJcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gY2xvc2VBY3Rpb247XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgU3RyaW5nW10gcGF0dGVybjtcblxuICAgIHB1YmxpYyBSaW9uSW52KFBsdWdpbiBtYWluQ2xhc3MsIGludCBzaXplLCBDb21wb25lbnQgdGl0bGUsIFBsYXllciBwbGF5ZXIsIFN0cmluZ1tdIHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5tYWluQ2xhc3MgPSBtYWluQ2xhc3M7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkgPSB0aGlzLm1haW5DbGFzcy5nZXRTZXJ2ZXIoKS5jcmVhdGVJbnZlbnRvcnkocGxheWVyLCBzaXplLCB0aXRsZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciA9IG5ldyBJbnZlbnRvcnlFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkNsYXNzLmdldFNlcnZlcigpLmdldFBsdWdpbk1hbmFnZXIoKS5yZWdpc3RlckV2ZW50cyhsaXN0ZW5lciwgbWFpbkNsYXNzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBhZGRJdGVtKEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSkge1xuICAgICAgICBpbnZlbnRvcnkuYWRkSXRlbShhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKTtcbiAgICAgICAgYWN0aXZlSXRlbXMuYWRkKGFjdGl2ZUl0ZW0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbk9wZW4oQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5vcGVuQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbkNsb3NlKENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICB0aGlzLmNsb3NlQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZUl0ZW0oaW50IHNsb3QpIHtcbiAgICAgICAgYWN0aXZlSXRlbXMucmVtb3ZlSWYoaXRlbSAtPiBpdGVtLmdldEl0ZW1TdGFjaygpLmVxdWFscyhpbnZlbnRvcnkuZ2V0SXRlbShzbG90KSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIG9wZW4oUGxheWVyIHBsYXllcikge1xuICAgICAgICBwbGF5ZXIub3BlbkludmVudG9yeShpbnZlbnRvcnkpO1xuICAgICAgICBpZiAob3BlbkFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBJbnZlbnRvcnlPcGVuRXZlbnQgb3BlbkV2ZW50ID0gbmV3IEludmVudG9yeU9wZW5FdmVudChwbGF5ZXIuZ2V0T3BlbkludmVudG9yeSgpKTtcbiAgICAgICAgICAgIG9wZW5BY3Rpb24uYWNjZXB0KG9wZW5FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJdGVtKGludCBzbG90LCBBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgaW52ZW50b3J5LnNldEl0ZW0oc2xvdCwgYWN0aXZlSXRlbS5nZXRJdGVtU3RhY2soKSk7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLmFkZChhY3RpdmVJdGVtKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNsaWNrKEludmVudG9yeUNsaWNrRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgZm9yIChBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0gOiBhY3RpdmVJdGVtcykge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmdldEN1cnJlbnRJdGVtKCkgIT0gbnVsbCAmJiBldmVudC5nZXRDdXJyZW50SXRlbSgpLmlzU2ltaWxhcihhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKSAmJiBhY3RpdmVJdGVtLmdldEFjdGlvbigpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVJdGVtLmdldEFjdGlvbigpLmFjY2VwdChldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBoYW5kbGVDbG9zZShJbnZlbnRvcnlDbG9zZUV2ZW50IGV2ZW50KSB7XG4gICAgICAgIGlmIChjbG9zZUFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbG9zZUFjdGlvbi5hY2NlcHQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0VW5BY3RpdmVJdGVtcyhIYXNoTWFwPENoYXJhY3RlciwgQWN0aXZlSXRlbT4gYWN0aXZlSXRlbXMpIHtcblxuICAgICAgICBpbnQgc3RhcnRJbmRleCA9IDA7XG5cbiAgICAgICAgZm9yIChTdHJpbmcgcm93IDogcGF0dGVybikge1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+PSBzaXplKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcm93Lmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjaGFyIGMgPSByb3cuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtcy5jb250YWluc0tleShjKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRJdGVtKHN0YXJ0SW5kZXggKyBpLCBhY3RpdmVJdGVtcy5nZXQoYykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnRJbmRleCArPSA5O1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYWN0aXZlSXRlbXNcbiAgICAgKiBAYXBpTm90ZSBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNldCB0aGUgYWN0aXZlIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnlcbiAgICAgKi9cbiAgICBwdWJsaWMgdm9pZCBzZXRBY3RpdmVJdGVtcyhIYXNoTWFwPENoYXJhY3RlciwgTGlzdDxBY3RpdmVJdGVtPj4gYWN0aXZlSXRlbXMpIHtcbiAgICAgICAgaW50IHN0YXJ0SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAoU3RyaW5nIHJvdyA6IHBhdHRlcm4pIHtcblxuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPj0gc2l6ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHJvdy5sZW5ndGgoKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2hhciBjID0gcm93LmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbXMuY29udGFpbnNLZXkoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxBY3RpdmVJdGVtPiBpdGVtcyA9IGFjdGl2ZUl0ZW1zLmdldChjKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChBY3RpdmVJdGVtIGl0ZW0gOiBpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludmVudG9yeS5jb250YWlucyhpdGVtLmdldEl0ZW1TdGFjaygpKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKEl0ZW1TdGFjayBpdGVtU3RhY2sgOiBpbnZlbnRvcnkuZ2V0Q29udGVudHMoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1TdGFjayAhPSBudWxsKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtKHN0YXJ0SW5kZXggKyBpLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnRJbmRleCArPSA5O1xuICAgICAgICB9XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvY29udHJvbGxlci9JbnZlbnRvcnlFdmVudExpc3RlbmVyLmphdmFcbnBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXI7XG5cbmltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuU3RleU9uSW52O1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuRXZlbnRIYW5kbGVyO1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuTGlzdGVuZXI7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5pbnZlbnRvcnkuSW52ZW50b3J5Q2xpY2tFdmVudDtcbmltcG9ydCBvcmcuYnVra2l0LmV2ZW50LmludmVudG9yeS5JbnZlbnRvcnlDbG9zZUV2ZW50O1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuaW52ZW50b3J5LkludmVudG9yeU9wZW5FdmVudDtcblxuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkFycmF5cztcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxucHVibGljIGNsYXNzIEludmVudG9yeUV2ZW50TGlzdGVuZXIgaW1wbGVtZW50cyBMaXN0ZW5lciB7XG5cbiAgICBwcml2YXRlIGZpbmFsIExpc3Q8U3RleU9uSW52PiByZWdpc3RlcmVkSW52ZW50b3JpZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcblxuICAgIHB1YmxpYyB2b2lkIHJlZ2lzdGVySW52ZW50b3J5KFN0ZXlPbkludiBpbnZlbnRvcnkpIHtcbiAgICAgICAgcmVnaXN0ZXJlZEludmVudG9yaWVzLmFkZChpbnZlbnRvcnkpO1xuICAgIH1cblxuICAgIEBFdmVudEhhbmRsZXJcbiAgICBwdWJsaWMgdm9pZCBvbkludmVudG9yeUNsaWNrKEludmVudG9yeUNsaWNrRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgZm9yIChTdGV5T25JbnYgaW52ZW50b3J5IDogcmVnaXN0ZXJlZEludmVudG9yaWVzKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZ2V0Q2xpY2tlZEludmVudG9yeSgpICE9IG51bGwgJiYgZXZlbnQuZ2V0Q2xpY2tlZEludmVudG9yeSgpLmVxdWFscyhpbnZlbnRvcnkuZ2V0SW52ZW50b3J5KCkpKSB7XG4gICAgICAgICAgICAgICAgaW52ZW50b3J5LmhhbmRsZUNsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBFdmVudEhhbmRsZXJcbiAgICBwdWJsaWMgdm9pZCBvbkludmVudG9yeU9wZW4oSW52ZW50b3J5T3BlbkV2ZW50IGV2ZW50KSB7XG5cbiAgICAgICAgZm9yIChTdGV5T25JbnYgaW52ZW50b3J5IDogcmVnaXN0ZXJlZEludmVudG9yaWVzKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZ2V0SW52ZW50b3J5KCkuZXF1YWxzKGludmVudG9yeS5nZXRJbnZlbnRvcnkoKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5Lm9wZW5BY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnkub3BlbkFjdGlvbi5hY2NlcHQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBARXZlbnRIYW5kbGVyXG4gICAgcHVibGljIHZvaWQgb25JbnZlbnRvcnlDbG9zZShJbnZlbnRvcnlDbG9zZUV2ZW50IGV2ZW50KSB7XG5cbiAgICAgICAgZm9yIChTdGV5T25JbnYgaW52ZW50b3J5IDogcmVnaXN0ZXJlZEludmVudG9yaWVzKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZ2V0SW52ZW50b3J5KCkuZXF1YWxzKGludmVudG9yeS5nZXRJbnZlbnRvcnkoKSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5LmNsb3NlQWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52ZW50b3J5LmNsb3NlQWN0aW9uLmFjY2VwdChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvaXRlbS9BY3RpdmVJdGVtLmphdmFcbnBhY2thZ2UgY2guYWtjZWxlcmF0MHIuYXBpLmludi5pdGVtO1xuXG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBvcmcuYnVra2l0LmV2ZW50LkV2ZW50SGFuZGxlcjtcbmltcG9ydCBvcmcuYnVra2l0LmV2ZW50Lkxpc3RlbmVyO1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuaW52ZW50b3J5LkludmVudG9yeUNsaWNrRXZlbnQ7XG5pbXBvcnQgb3JnLmJ1a2tpdC5pbnZlbnRvcnkuSXRlbVN0YWNrO1xuXG5pbXBvcnQgamF2YS51dGlsLmZ1bmN0aW9uLkNvbnN1bWVyO1xuXG5AR2V0dGVyXG5wdWJsaWMgY2xhc3MgQWN0aXZlSXRlbSB7XG5cbiAgICBwcml2YXRlIGZpbmFsIEl0ZW1TdGFjayBpdGVtU3RhY2s7XG4gICAgcHJpdmF0ZSBDb25zdW1lcjxJbnZlbnRvcnlDbGlja0V2ZW50PiBhY3Rpb247XG5cbiAgICBwdWJsaWMgQWN0aXZlSXRlbShJdGVtU3RhY2sgaXRlbVN0YWNrKSB7XG4gICAgICAgIHRoaXMuaXRlbVN0YWNrID0gaXRlbVN0YWNrO1xuICAgIH1cblxuICAgIHB1YmxpYyBBY3RpdmVJdGVtIGNsaWNrKENvbnN1bWVyPEludmVudG9yeUNsaWNrRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4odGhpcy5oYXNoQ29kZSgpICsgXCIgXCIgKyBcImFjdGl2ZUl0ZW1IYXNoQ29kZUluQWN0aXZlSXRlbUNsYXNzXCIgKyB0aGlzLml0ZW1TdGFjay5nZXRUeXBlKCkubmFtZSgpKTtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIEBFdmVudEhhbmRsZXJcbiAgICBwdWJsaWMgdm9pZCBoYW5kbGVDbGljayhJbnZlbnRvcnlDbGlja0V2ZW50IGV2ZW50KSB7XG4gICAgICAgIGlmIChhY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgYWN0aW9uLmFjY2VwdChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxUERDMjhTTTMyVUNXZmNvSEg0OHp1dCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3cgSSBuZWVkIHRvIGNoZWNrIGlmIHRoZSBgaW52ZW50b3J5TWFuYWdlcmAgZmllbGQgaXMgYWxyZWFkeSBkZWNsYXJlZCBpbiB0aGUgRGV2U3lzdGVtIGNsYXNzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImFiZjZlNDRjLTBhMGEtNDU0ZC04YTU3LTIzMjAzMDc0YWUwMiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMVNUOWQ5RjE1Qm5aTWdtUTNueDdpTkoiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgRGV2U3lzdGVtLmphdmEgZmlsZSBhZ2FpbiB0byBtYWtlIHN1cmUgSSBoYXZlIHRoZSBtb3N0IHVwLXRvLWRhdGUgaW5mb3JtYXRpb246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcbnBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbTtcblxuaW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcblxucHVibGljIGZpbmFsIGNsYXNzIERldlN5c3RlbSBleHRlbmRzIEphdmFQbHVnaW4ge1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG4gICAgICAgIC8vIFBsdWdpbiBzdGFydHVwIGxvZ2ljXG5cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL3BsdWdpbi55bWxcbm5hbWU6IERldlN5c3RlbVxudmVyc2lvbjogJzEuMCdcbm1haW46IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uRGV2U3lzdGVtXG5hcGktdmVyc2lvbjogJzEuMjEnXG5hdXRob3JzOiBbIFN0ZXlPbiBdXG5kZXNjcmlwdGlvbjogT2ZmaWNpYWwgU3RleU9uIERldmVsb3BlciBTeXN0ZW0gZm9yIE1pbmVjcmFmdCBTZXJ2ZXJzXG53ZWJzaXRlOiBodHRwczovL2dpdGh1Yi5jb20vU3RleU9uXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaW52L1N0ZXlPbkludi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFN0ZXlPbkludiB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBJbnZlbnRvcnkgaW52ZW50b3J5O1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEFycmF5TGlzdDxBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcztcbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbGF5ZXIgcGxheWVyO1xuICAgIHByaXZhdGUgZmluYWwgaW50IHNpemU7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQ29tcG9uZW50IHRpdGxlO1xuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IG9wZW5BY3Rpb247XG4gICAgcHJpdmF0ZSBJbnZlbnRvcnlFdmVudExpc3RlbmVyIGxpc3RlbmVyO1xuICAgIEBHZXR0ZXJcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gY2xvc2VBY3Rpb247XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgU3RyaW5nW10gcGF0dGVybjtcblxuICAgIHB1YmxpYyBSaW9uSW52KFBsdWdpbiBtYWluQ2xhc3MsIGludCBzaXplLCBDb21wb25lbnQgdGl0bGUsIFBsYXllciBwbGF5ZXIsIFN0cmluZ1tdIHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5tYWluQ2xhc3MgPSBtYWluQ2xhc3M7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkgPSB0aGlzLm1haW5DbGFzcy5nZXRTZXJ2ZXIoKS5jcmVhdGVJbnZlbnRvcnkocGxheWVyLCBzaXplLCB0aXRsZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciA9IG5ldyBJbnZlbnRvcnlFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkNsYXNzLmdldFNlcnZlcigpLmdldFBsdWdpbk1hbmFnZXIoKS5yZWdpc3RlckV2ZW50cyhsaXN0ZW5lciwgbWFpbkNsYXNzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBhZGRJdGVtKEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSkge1xuICAgICAgICBpbnZlbnRvcnkuYWRkSXRlbShhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKTtcbiAgICAgICAgYWN0aXZlSXRlbXMuYWRkKGFjdGl2ZUl0ZW0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbk9wZW4oQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5vcGVuQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbkNsb3NlKENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICB0aGlzLmNsb3NlQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZUl0ZW0oaW50IHNsb3QpIHtcbiAgICAgICAgYWN0aXZlSXRlbXMucmVtb3ZlSWYoaXRlbSAtPiBpdGVtLmdldEl0ZW1TdGFjaygpLmVxdWFscyhpbnZlbnRvcnkuZ2V0SXRlbShzbG90KSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIG9wZW4oUGxheWVyIHBsYXllcikge1xuICAgICAgICBwbGF5ZXIub3BlbkludmVudG9yeShpbnZlbnRvcnkpO1xuICAgICAgICBpZiAob3BlbkFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBJbnZlbnRvcnlPcGVuRXZlbnQgb3BlbkV2ZW50ID0gbmV3IEludmVudG9yeU9wZW5FdmVudChwbGF5ZXIuZ2V0T3BlbkludmVudG9yeSgpKTtcbiAgICAgICAgICAgIG9wZW5BY3Rpb24uYWNjZXB0KG9wZW5FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJdGVtKGludCBzbG90LCBBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgaW52ZW50b3J5LnNldEl0ZW0oc2xvdCwgYWN0aXZlSXRlbS5nZXRJdGVtU3RhY2soKSk7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLmFkZChhY3RpdmVJdGVtKTtcbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhY3RpdmVJdGVtc1xuICAgICAqIEBhcGlOb3RlIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2V0IHRoZSBhY3RpdmUgaXRlbXMgaW4gdGhlIGludmVudG9yeVxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIHNldEFjdGl2ZUl0ZW1zKEhhc2hNYXA8Q2hhcmFjdGVyLCBMaXN0PEFjdGl2ZUl0ZW0+PiBhY3RpdmVJdGVtcykge1xuICAgICAgICBpbnQgc3RhcnRJbmRleCA9IDA7XG5cbiAgICAgICAgZm9yIChTdHJpbmcgcm93IDogcGF0dGVybikge1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+PSBzaXplKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcm93Lmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjaGFyIGMgPSByb3cuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtcy5jb250YWluc0tleShjKSkge1xuICAgICAgICAgICAgICAgICAgICBMaXN0PEFjdGl2ZUl0ZW0+IGl0ZW1zID0gYWN0aXZlSXRlbXMuZ2V0KGMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKEFjdGl2ZUl0ZW0gaXRlbSA6IGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5LmNvbnRhaW5zKGl0ZW0uZ2V0SXRlbVN0YWNrKCkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoSXRlbVN0YWNrIGl0ZW1TdGFjayA6IGludmVudG9yeS5nZXRDb250ZW50cygpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVN0YWNrICE9IG51bGwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oc3RhcnRJbmRleCArIGksIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydEluZGV4ICs9IDk7XG4gICAgICAgIH1cbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9SaW9uSW52LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUmlvbkludiB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBJbnZlbnRvcnkgaW52ZW50b3J5O1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEFycmF5TGlzdDxBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcztcbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbGF5ZXIgcGxheWVyO1xuICAgIHByaXZhdGUgZmluYWwgaW50IHNpemU7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQ29tcG9uZW50IHRpdGxlO1xuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IG9wZW5BY3Rpb247XG4gICAgcHJpdmF0ZSBJbnZlbnRvcnlFdmVudExpc3RlbmVyIGxpc3RlbmVyO1xuICAgIEBHZXR0ZXJcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gY2xvc2VBY3Rpb247XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgU3RyaW5nW10gcGF0dGVybjtcblxuICAgIHB1YmxpYyBSaW9uSW52KFBsdWdpbiBtYWluQ2xhc3MsIGludCBzaXplLCBDb21wb25lbnQgdGl0bGUsIFBsYXllciBwbGF5ZXIsIFN0cmluZ1tdIHBhdHRlcm4pIHtcbiAgICAgICAgdGhpcy5tYWluQ2xhc3MgPSBtYWluQ2xhc3M7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkgPSB0aGlzLm1haW5DbGFzcy5nZXRTZXJ2ZXIoKS5jcmVhdGVJbnZlbnRvcnkocGxheWVyLCBzaXplLCB0aXRsZSk7XG4gICAgICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSB7XG4gICAgICAgICAgICBsaXN0ZW5lciA9IG5ldyBJbnZlbnRvcnlFdmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubWFpbkNsYXNzLmdldFNlcnZlcigpLmdldFBsdWdpbk1hbmFnZXIoKS5yZWdpc3RlckV2ZW50cyhsaXN0ZW5lciwgbWFpbkNsYXNzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ZW5lci5yZWdpc3RlckludmVudG9yeSh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBhZGRJdGVtKEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSkge1xuICAgICAgICBpbnZlbnRvcnkuYWRkSXRlbShhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKTtcbiAgICAgICAgYWN0aXZlSXRlbXMuYWRkKGFjdGl2ZUl0ZW0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbk9wZW4oQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5vcGVuQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgUmlvbkludiBvbkNsb3NlKENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICB0aGlzLmNsb3NlQWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cblxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZUl0ZW0oaW50IHNsb3QpIHtcbiAgICAgICAgYWN0aXZlSXRlbXMucmVtb3ZlSWYoaXRlbSAtPiBpdGVtLmdldEl0ZW1TdGFjaygpLmVxdWFscyhpbnZlbnRvcnkuZ2V0SXRlbShzbG90KSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIG9wZW4oUGxheWVyIHBsYXllcikge1xuICAgICAgICBwbGF5ZXIub3BlbkludmVudG9yeShpbnZlbnRvcnkpO1xuICAgICAgICBpZiAob3BlbkFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBJbnZlbnRvcnlPcGVuRXZlbnQgb3BlbkV2ZW50ID0gbmV3IEludmVudG9yeU9wZW5FdmVudChwbGF5ZXIuZ2V0T3BlbkludmVudG9yeSgpKTtcbiAgICAgICAgICAgIG9wZW5BY3Rpb24uYWNjZXB0KG9wZW5FdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRJdGVtKGludCBzbG90LCBBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgaW52ZW50b3J5LnNldEl0ZW0oc2xvdCwgYWN0aXZlSXRlbS5nZXRJdGVtU3RhY2soKSk7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLmFkZChhY3RpdmVJdGVtKTtcbiAgICB9XG4uLi5cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhY3RpdmVJdGVtc1xuICAgICAqIEBhcGlOb3RlIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2V0IHRoZSBhY3RpdmUgaXRlbXMgaW4gdGhlIGludmVudG9yeVxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIHNldEFjdGl2ZUl0ZW1zKEhhc2hNYXA8Q2hhcmFjdGVyLCBMaXN0PEFjdGl2ZUl0ZW0+PiBhY3RpdmVJdGVtcykge1xuICAgICAgICBpbnQgc3RhcnRJbmRleCA9IDA7XG5cbiAgICAgICAgZm9yIChTdHJpbmcgcm93IDogcGF0dGVybikge1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+PSBzaXplKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcm93Lmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjaGFyIGMgPSByb3cuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtcy5jb250YWluc0tleShjKSkge1xuICAgICAgICAgICAgICAgICAgICBMaXN0PEFjdGl2ZUl0ZW0+IGl0ZW1zID0gYWN0aXZlSXRlbXMuZ2V0KGMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKEFjdGl2ZUl0ZW0gaXRlbSA6IGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5LmNvbnRhaW5zKGl0ZW0uZ2V0SXRlbVN0YWNrKCkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoSXRlbVN0YWNrIGl0ZW1TdGFjayA6IGludmVudG9yeS5nZXRDb250ZW50cygpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVN0YWNrICE9IG51bGwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oc3RhcnRJbmRleCArIGksIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydEluZGV4ICs9IDk7XG4gICAgICAgIH1cbiAgICB9XG59Li4uXG5QYXRoOiBidWlsZC5ncmFkbGVcbi4uLlxuXG5kZWYgdGFyZ2V0SmF2YVZlcnNpb24gPSAyMVxuamF2YSB7XG4gICAgZGVmIGphdmFWZXJzaW9uID0gSmF2YVZlcnNpb24udG9WZXJzaW9uKHRhcmdldEphdmFWZXJzaW9uKVxuICAgIHNvdXJjZUNvbXBhdGliaWxpdHkgPSBqYXZhVmVyc2lvblxuICAgIHRhcmdldENvbXBhdGliaWxpdHkgPSBqYXZhVmVyc2lvblxuICAgIGlmIChKYXZhVmVyc2lvbi5jdXJyZW50KCkgPCBqYXZhVmVyc2lvbikge1xuICAgICAgICB0b29sY2hhaW4ubGFuZ3VhZ2VWZXJzaW9uID0gSmF2YUxhbmd1YWdlVmVyc2lvbi5vZih0YXJnZXRKYXZhVmVyc2lvbilcbiAgICB9XG59XG5cbnRhc2tzLndpdGhUeXBlKEphdmFDb21waWxlKS5jb25maWd1cmVFYWNoIHtcbiAgICBvcHRpb25zLmVuY29kaW5nID0gJ1VURi04J1xuXG4gICAgaWYgKHRhcmdldEphdmFWZXJzaW9uID49IDEwIHx8IEphdmFWZXJzaW9uLmN1cnJlbnQoKS5pc0phdmExMENvbXBhdGlibGUoKSkge1xuICAgICAgICBvcHRpb25zLnJlbGVhc2Uuc2V0KHRhcmdldEphdmFWZXJzaW9uKVxuICAgIH1cbn1cblxucHJvY2Vzc1Jlc291cmNlcyB7XG4gICAgZGVmIHByb3BzID0gW3ZlcnNpb246IHZlcnNpb25dXG4gICAgaW5wdXRzLnByb3BlcnRpZXMgcHJvcHNcbiAgICBmaWx0ZXJpbmdDaGFyc2V0ICdVVEYtOCdcbiAgICBmaWxlc01hdGNoaW5nKCdwbHVnaW4ueW1sJykge1xuICAgICAgICBleHBhbmQgcHJvcHNcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaW52L2NvbnRyb2xsZXIvSW52ZW50b3J5TWFuYWdlci5qYXZhXG5wYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyO1xuXG5pbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LlN0ZXlPbkludjtcbmltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuU3RleU9uSW52O1xuaW1wb3J0IG9yZy5idWtraXQucGx1Z2luLlBsdWdpbjtcblxuaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuaW1wb3J0IGphdmEudXRpbC5VVUlEO1xuXG5wdWJsaWMgY2xhc3MgSW52ZW50b3J5TWFuYWdlciB7XG5cbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBIYXNoTWFwPFVVSUQsIFN0ZXlPbkludj4gY2FjaGU7XG5cbiAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlcihQbHVnaW4gbWFpbkNsYXNzLCBIYXNoTWFwPFVVSUQsIFN0ZXlPbkludj4gY2FjaGUpIHtcbiAgICAgICAgdGhpcy5tYWluQ2xhc3MgPSBtYWluQ2xhc3M7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBvcGVuKFVVSUQgdXVpZCwgU3RleU9uSW52IFN0ZXlPbkludikge1xuICAgICAgICB0aGlzLmNhY2hlLnB1dCh1dWlkLCBTdGV5T25JbnYpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGFkZChVVUlEIHV1aWQsIFN0ZXlPbkludiBTdGV5T25JbnYpIHtcbiAgICAgICAgY2FjaGUucHV0KHV1aWQsIFN0ZXlPbkludik7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgcmVtb3ZlKFVVSUQgdXVpZCkge1xuICAgICAgICBjYWNoZS5yZW1vdmUodXVpZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXIoKSB7XG4gICAgICAgIGNhY2hlLmNsZWFyKCk7XG4gICAgfVxuXG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2l0ZW0vSXRlbUJ1aWxkZXIuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBJdGVtQnVpbGRlciB7XG5cbiAgICBwcml2YXRlIGZpbmFsIEl0ZW1TdGFjayBpdGVtU3RhY2s7XG5cbiAgICBwdWJsaWMgSXRlbUJ1aWxkZXIoSXRlbVN0YWNrIGl0ZW1TdGFjaykge1xuICAgICAgICB0aGlzLml0ZW1TdGFjayA9IGl0ZW1TdGFjaztcbiAgICB9XG5cbiAgICBwdWJsaWMgSXRlbUJ1aWxkZXIoTWF0ZXJpYWwgbWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2sgPSBuZXcgSXRlbVN0YWNrKG1hdGVyaWFsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgSXRlbUJ1aWxkZXIgbmFtZShTdHJpbmcgbmFtZSkge1xuICAgICAgICBuYW1lKExlZ2FjeUNvbXBvbmVudFNlcmlhbGl6ZXIubGVnYWN5U2VjdGlvbigpLmRlc2VyaWFsaXplKG5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyIG5hbWUoQ29tcG9uZW50IG5hbWUpIHtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2suZWRpdE1ldGEoaXRlbU1ldGEgLT4gaXRlbU1ldGEuZGlzcGxheU5hbWUobmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgSXRlbUJ1aWxkZXIgc2V0Q3VzdG9tTW9kZWxEYXRhKGludCBjdXN0b21Nb2RlbERhdGEpIHtcbiAgICAgICAgSXRlbU1ldGEgaXRlbU1ldGEgPSB0aGlzLml0ZW1TdGFjay5nZXRJdGVtTWV0YSgpO1xuICAgICAgICBpdGVtTWV0YS5zZXRDdXN0b21Nb2RlbERhdGEoY3VzdG9tTW9kZWxEYXRhKTtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2suc2V0SXRlbU1ldGEoaXRlbU1ldGEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgSXRlbVN0YWNrIGJ1aWxkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtU3RhY2s7XG4gICAgfVxuLi4uXG5QYXRoOiBzZXR0aW5ncy5ncmFkbGVcbnJvb3RQcm9qZWN0Lm5hbWUgPSAnRGV2U3lzdGVtJ1xuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFZVjd5TWVoY2NoOU1xTUJoMjd3TWZTIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBEZXZTeXN0ZW0uamF2YSBmaWxlIGFnYWluIHRvIG1ha2Ugc3VyZSBJIGhhdmUgdGhlIG1vc3QgdXAtdG8tZGF0ZSBpbmZvcm1hdGlvbjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI4NmU5ZDgzZC1iNDc1LTQxZjktYTA4OS00OTUwYmJjNDM1YTkiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFKNlAydThGMllha0pGdVJ2NUIxREYxIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwicHVibGljIGZpbmFsIGNsYXNzIERldlN5c3RlbSBleHRlbmRzIEphdmFQbHVnaW4ge1xcblxcblxcblwiLCBcIm5ld19zdHJcIjogXCJwdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XFxuXFxuICAgIHByaXZhdGUgSW52ZW50b3J5TWFuYWdlciBpbnZlbnRvcnlNYW5hZ2VyO1xcblxcblwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogOCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxMH0sIHtcIm9sZF9zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcXG4gICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xcbiAgICB9XFxufVwiLCBcIm5ld19zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcXG4gICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogR2V0IHRoZSBpbnZlbnRvcnkgbWFuYWdlciBpbnN0YW5jZVxcbiAgICAgKiBAcmV0dXJuIFRoZSBpbnZlbnRvcnkgbWFuYWdlclxcbiAgICAgKi9cXG4gICAgcHVibGljIEludmVudG9yeU1hbmFnZXIgZ2V0SW52ZW50b3J5TWFuYWdlcigpIHtcXG4gICAgICAgIHJldHVybiBpbnZlbnRvcnlNYW5hZ2VyO1xcbiAgICB9XFxufVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTgsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjJ9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkJhc2VkIG9uIHRoZSBjb2RlIEkndmUgZXhhbWluZWQsIEkgY2FuIHNlZSB0aGF0OlxuXG4xLiBUaGUgRGV2U3lzdGVtIGNsYXNzIGlzIGluaXRpYWxpemluZyBhbiBgaW52ZW50b3J5TWFuYWdlcmAgaW4gdGhlIGBvbkVuYWJsZSgpYCBtZXRob2RcbjIuIEhvd2V2ZXIsIHRoZSBmaWVsZCBkZWNsYXJhdGlvbiBmb3IgYGludmVudG9yeU1hbmFnZXJgIGlzIG1pc3NpbmdcbjMuIFRoZXJlJ3Mgbm8gZ2V0dGVyIG1ldGhvZCBmb3IgdGhlIGBpbnZlbnRvcnlNYW5hZ2VyYFxuXG5Ob3cgSSdsbCBhZGQgYm90aCB0aGUgZmllbGQgZGVjbGFyYXRpb24gYW5kIHRoZSBnZXR0ZXIgbWV0aG9kIGZvciB0aGUgSW52ZW50b3J5TWFuYWdlcjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXIuSW52ZW50b3J5TWFuYWdlcjtcbiAgICAgNFx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNVx0XG4gICAgIDZcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAgOVx0XG4gICAgMTBcdFxuICAgIDExXHRcbiAgICAxMlx0ICAgIEBPdmVycmlkZVxuICAgIDEzXHQgICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG4gICAgMTRcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxNVx0XG4gICAgMTZcdCAgICB9XG4gICAgMTdcdFxuICAgIDE4XHQgICAgQE92ZXJyaWRlXG4gICAgMTlcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjBcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjFcdCAgICB9XG4gICAgMjJcdH1cbiAgICAyM1x0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyM1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxU1Q5ZDlGMTVCblpNZ21RM254N2lOSiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJCYXNlZCBvbiB0aGUgY29kZSBJJ3ZlIGV4YW1pbmVkLCBJIGNhbiBzZWUgdGhhdDpcblxuMS4gVGhlIERldlN5c3RlbSBjbGFzcyBpcyBpbml0aWFsaXppbmcgYW4gYGludmVudG9yeU1hbmFnZXJgIGluIHRoZSBgb25FbmFibGUoKWAgbWV0aG9kXG4yLiBIb3dldmVyLCB0aGUgZmllbGQgZGVjbGFyYXRpb24gZm9yIGBpbnZlbnRvcnlNYW5hZ2VyYCBpcyBtaXNzaW5nXG4zLiBUaGVyZSdzIG5vIGdldHRlciBtZXRob2QgZm9yIHRoZSBgaW52ZW50b3J5TWFuYWdlcmBcblxuTm93IEknbGwgYWRkIGJvdGggdGhlIGZpZWxkIGRlY2xhcmF0aW9uIGFuZCB0aGUgZ2V0dGVyIG1ldGhvZCBmb3IgdGhlIEludmVudG9yeU1hbmFnZXI6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzAzNmRjODMtNmFmZi00ZDcwLTk4YjUtZmI2ZDA0ZDAzZDBjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNzdzOU1UTTJDYnMxMUxIZ2Jqa0JmTCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIHZlcmlmeSB0aGUgY2hhbmdlcyB0byBtYWtlIHN1cmUgZXZlcnl0aGluZyBsb29rcyBnb29kOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgNFx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNVx0XG4gICAgIDZcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAgOVx0XG4gICAgMTBcdCAgICBwcml2YXRlIEludmVudG9yeU1hbmFnZXIgaW52ZW50b3J5TWFuYWdlcjtcbiAgICAxMVx0XG4gICAgMTJcdFxuICAgIDEzXHQgICAgQE92ZXJyaWRlXG4gICAgMTRcdCAgICBwdWJsaWMgdm9pZCBvbkVuYWJsZSgpIHtcbiAgICAxNVx0ICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcih0aGlzLCBuZXcgSGFzaE1hcDw+KCkpO1xuICAgIDE2XHRcblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgMTVcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxNlx0XG4gICAgMTdcdCAgICB9XG4gICAgMThcdFxuICAgIDE5XHQgICAgQE92ZXJyaWRlXG4gICAgMjBcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjFcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjJcdCAgICB9XG4gICAgMjNcdFxuICAgIDI0XHQgICAgLyoqXG4gICAgMjVcdCAgICAgKiBHZXQgdGhlIGludmVudG9yeSBtYW5hZ2VyIGluc3RhbmNlXG4gICAgMjZcdCAgICAgKiBAcmV0dXJuIFRoZSBpbnZlbnRvcnkgbWFuYWdlclxuICAgIDI3XHQgICAgICovXG4gICAgMjhcdCAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlciBnZXRJbnZlbnRvcnlNYW5hZ2VyKCkge1xuICAgIDI5XHQgICAgICAgIHJldHVybiBpbnZlbnRvcnlNYW5hZ2VyO1xuICAgIDMwXHQgICAgfVxuICAgIDMxXHR9XG4gICAgMzJcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFKNlAydThGMllha0pGdVJ2NUIxREYxIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIHZlcmlmeSB0aGUgY2hhbmdlcyB0byBtYWtlIHN1cmUgZXZlcnl0aGluZyBsb29rcyBnb29kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjllYTFhNjEwLTNjOTYtNDA3OS1hODU2LWEzMzMzYzViZmJjNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IlBlcmZlY3QhIEkndmUgc3VjY2Vzc2Z1bGx5IGFkZGVkOlxuXG4xLiBBIHByaXZhdGUgZmllbGQgZGVjbGFyYXRpb24gZm9yIHRoZSBgaW52ZW50b3J5TWFuYWdlcmAgb24gbGluZSAxMFxuMi4gQSBnZXR0ZXIgbWV0aG9kIGZvciB0aGUgYGludmVudG9yeU1hbmFnZXJgIG9uIGxpbmVzIDI0LTMwIHdpdGggcHJvcGVyIEphdmFEb2MgY29tbWVudHNcblxuVGhlIGNoYW5nZXMgbG9vayBnb29kIGFuZCBzaG91bGQgcHJvdmlkZSB0aGUgZnVuY3Rpb25hbGl0eSB5b3UgcmVxdWVzdGVkLiBUaGUgZ2V0dGVyIG1ldGhvZCB3aWxsIGFsbG93IG90aGVyIGNsYXNzZXMgdG8gYWNjZXNzIHRoZSBJbnZlbnRvcnlNYW5hZ2VyIGluc3RhbmNlIHRocm91Z2ggdGhlIERldlN5c3RlbSBwbHVnaW4gaW5zdGFuY2UuXG5cbklzIHRoZXJlIGFueXRoaW5nIGVsc2UgeW91J2QgbGlrZSBtZSB0byBoZWxwIHlvdSB3aXRoIHJlZ2FyZGluZyB0aGUgSW52ZW50b3J5TWFuYWdlciBvciBhbnkgb3RoZXIgcGFydCBvZiB5b3VyIHBsdWdpbj9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXIuSW52ZW50b3J5TWFuYWdlcjtcbiAgICAgNFx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNVx0XG4gICAgIDZcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAgOVx0XG4gICAgMTBcdCAgICBwcml2YXRlIEludmVudG9yeU1hbmFnZXIgaW52ZW50b3J5TWFuYWdlcjtcbiAgICAxMVx0XG4gICAgMTJcdFxuICAgIDEzXHQgICAgQE92ZXJyaWRlXG4gICAgMTRcdCAgICBwdWJsaWMgdm9pZCBvbkVuYWJsZSgpIHtcbiAgICAxNVx0ICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcih0aGlzLCBuZXcgSGFzaE1hcDw+KCkpO1xuICAgIDE2XHRcbiAgICAxN1x0ICAgIH1cbiAgICAxOFx0XG4gICAgMTlcdCAgICBAT3ZlcnJpZGVcbiAgICAyMFx0ICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcbiAgICAyMVx0ICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcbiAgICAyMlx0ICAgIH1cbiAgICAyM1x0XG4gICAgMjRcdCAgICAvKipcbiAgICAyNVx0ICAgICAqIEdldCB0aGUgaW52ZW50b3J5IG1hbmFnZXIgaW5zdGFuY2VcbiAgICAyNlx0ICAgICAqIEByZXR1cm4gVGhlIGludmVudG9yeSBtYW5hZ2VyXG4gICAgMjdcdCAgICAgKi9cbiAgICAyOFx0ICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyIGdldEludmVudG9yeU1hbmFnZXIoKSB7XG4gICAgMjlcdCAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgMzBcdCAgICB9XG4gICAgMzFcdH1cbiAgICAzMlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNzdzOU1UTTJDYnMxMUxIZ2Jqa0JmTCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJQZXJmZWN0ISBJJ3ZlIHN1Y2Nlc3NmdWxseSBhZGRlZDpcblxuMS4gQSBwcml2YXRlIGZpZWxkIGRlY2xhcmF0aW9uIGZvciB0aGUgYGludmVudG9yeU1hbmFnZXJgIG9uIGxpbmUgMTBcbjIuIEEgZ2V0dGVyIG1ldGhvZCBmb3IgdGhlIGBpbnZlbnRvcnlNYW5hZ2VyYCBvbiBsaW5lcyAyNC0zMCB3aXRoIHByb3BlciBKYXZhRG9jIGNvbW1lbnRzXG5cblRoZSBjaGFuZ2VzIGxvb2sgZ29vZCBhbmQgc2hvdWxkIHByb3ZpZGUgdGhlIGZ1bmN0aW9uYWxpdHkgeW91IHJlcXVlc3RlZC4gVGhlIGdldHRlciBtZXRob2Qgd2lsbCBhbGxvdyBvdGhlciBjbGFzc2VzIHRvIGFjY2VzcyB0aGUgSW52ZW50b3J5TWFuYWdlciBpbnN0YW5jZSB0aHJvdWdoIHRoZSBEZXZTeXN0ZW0gcGx1Z2luIGluc3RhbmNlLlxuXG5JcyB0aGVyZSBhbnl0aGluZyBlbHNlIHlvdSdkIGxpa2UgbWUgdG8gaGVscCB5b3Ugd2l0aCByZWdhcmRpbmcgdGhlIEludmVudG9yeU1hbmFnZXIgb3IgYW55IG90aGVyIHBhcnQgb2YgeW91ciBwbHVnaW4/XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiIwODQ0NjI1YS03OGFhLTQ4OTYtYWNkYS0xNzg5ZTFhMDcwMjUiLCJ1dWlkIjoiYzM1ZjYzMjYtOTUwOC00NGU0LWE0MWEtMzY1ZjMzNjgyZmJiIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQzODA3MjM1Nzc1LCJ0b1RpbWVzdGFtcCI6MTc0MzgwNzMwOTkwMCwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiJmMzFlZmJlZC0yOTNkLTQyYzgtYjAyOS00YTM1ZTg1MWNhMGEiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImE2MDhmMDY5LTZmZTgtNDNkZC04MWJkLTU1ZGMxNDg0NTA4NyIsInJlcXVlc3RfbWVzc2FnZSI6InVzZSBsb21ib2sgdG8gbWFrZSB0aGUgY29kZSBzaG9ydGVyIHdpdGggQEdldHRlciAiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoidXNlIGxvbWJvayB0byBtYWtlIHRoZSBjb2RlIHNob3J0ZXIgd2l0aCBAR2V0dGVyICJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxOUNDSERiZ0FmSDhQSkFtekdBYlJqSyIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiU2hvdyBtZSB0aGUgYnVpbGQuZ3JhZGxlIGZpbGUgdG8gY2hlY2sgZm9yIExvbWJvayBkZXBlbmRlbmN5XCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJJ2xsIHVwZGF0ZSB0aGUgY29kZSB0byB1c2UgTG9tYm9rJ3MgYEBHZXR0ZXJgIGFubm90YXRpb24gdG8gbWFrZSB0aGUgY29kZSBzaG9ydGVyIGFuZCBjbGVhbmVyLiBGaXJzdCwgbGV0IG1lIGNoZWNrIGlmIExvbWJvayBpcyBhbHJlYWR5IGluY2x1ZGVkIGluIHRoZSBwcm9qZWN0IGRlcGVuZGVuY2llcy5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoidXNlIGxvbWJvayB0byBtYWtlIHRoZSBjb2RlIHNob3J0ZXIgd2l0aCBAR2V0dGVyICJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJJJ2xsIHVwZGF0ZSB0aGUgY29kZSB0byB1c2UgTG9tYm9rJ3MgYEBHZXR0ZXJgIGFubm90YXRpb24gdG8gbWFrZSB0aGUgY29kZSBzaG9ydGVyIGFuZCBjbGVhbmVyLiBGaXJzdCwgbGV0IG1lIGNoZWNrIGlmIExvbWJvayBpcyBhbHJlYWR5IGluY2x1ZGVkIGluIHRoZSBwcm9qZWN0IGRlcGVuZGVuY2llcy5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiNDRlMWU5ZS05Yjc2LTQwNjUtOWI4OC0zMzE4N2ZkNDQzMGYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFNWGJDRWE0ZDVCQjRKOUNpdk1uVXJWIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwicGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtO1xcblxcbmltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlci5JbnZlbnRvcnlNYW5hZ2VyO1xcbmltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5qYXZhLkphdmFQbHVnaW47XFxuXFxuaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1wiLCBcIm5ld19zdHJcIjogXCJwYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XFxuXFxuaW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyLkludmVudG9yeU1hbmFnZXI7XFxuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XFxuaW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcXG5cXG5pbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDZ9LCB7XCJvbGRfc3RyXCI6IFwiICAgIHByaXZhdGUgSW52ZW50b3J5TWFuYWdlciBpbnZlbnRvcnlNYW5hZ2VyO1wiLCBcIm5ld19zdHJcIjogXCIgICAgQEdldHRlclxcbiAgICBwcml2YXRlIEludmVudG9yeU1hbmFnZXIgaW52ZW50b3J5TWFuYWdlcjtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEwLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDEwfSwge1wib2xkX3N0clwiOiBcIiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIHZvaWQgb25EaXNhYmxlKCkge1xcbiAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBHZXQgdGhlIGludmVudG9yeSBtYW5hZ2VyIGluc3RhbmNlXFxuICAgICAqIEByZXR1cm4gVGhlIGludmVudG9yeSBtYW5hZ2VyXFxuICAgICAqL1xcbiAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlciBnZXRJbnZlbnRvcnlNYW5hZ2VyKCkge1xcbiAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XFxuICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XFxuICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcXG4gICAgfVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMTksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMzB9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkdyZWF0ISBJIGNhbiBzZWUgdGhhdCBMb21ib2sgaXMgYWxyZWFkeSBpbmNsdWRlZCBpbiB0aGUgcHJvamVjdCBkZXBlbmRlbmNpZXM6XG5cbmBgYGdyYWRsZVxuZGVwZW5kZW5jaWVzIHtcbiAgICBjb21waWxlT25seShcImlvLnBhcGVybWMucGFwZXI6cGFwZXItYXBpOjEuMjEuNC1SMC4xLVNOQVBTSE9UXCIpXG4gICAgY29tcGlsZU9ubHkoXCJvcmcucHJvamVjdGxvbWJvazpsb21ib2s6MS4xOC4zOFwiKVxuICAgIGFubm90YXRpb25Qcm9jZXNzb3IoXCJvcmcucHJvamVjdGxvbWJvazpsb21ib2s6MS4xOC4zOFwiKVxufVxuYGBgXG5cbkFuZCBJIGNhbiBhbHNvIHNlZSB0aGF0IExvbWJvaydzIGBAR2V0dGVyYCBhbm5vdGF0aW9uIGlzIGFscmVhZHkgYmVpbmcgdXNlZCBpbiBvdGhlciBjbGFzc2VzIGxpa2UgYFN0ZXlPbkludmAsIGBSaW9uSW52YCwgYW5kIGBBY3RpdmVJdGVtYC5cblxuTm93LCBsZXQncyB1cGRhdGUgdGhlIERldlN5c3RlbSBjbGFzcyB0byB1c2UgTG9tYm9rJ3MgYEBHZXR0ZXJgIGFubm90YXRpb24gaW5zdGVhZCBvZiBtYW51YWxseSB3cml0aW5nIHRoZSBnZXR0ZXIgbWV0aG9kOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJ1bnNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBidWlsZC5ncmFkbGVcbnBsdWdpbnMge1xuICAgIGlkICdqYXZhJ1xuICAgIGlkKFwieHl6LmpwZW5pbGxhLnJ1bi1wYXBlclwiKSB2ZXJzaW9uIFwiMi4zLjFcIlxufVxuXG5ncm91cCA9ICdkZS5zdGV5b24nXG52ZXJzaW9uID0gJzEuMCdcblxucmVwb3NpdG9yaWVzIHtcbiAgICBtYXZlbkNlbnRyYWwoKVxuICAgIG1hdmVuIHtcbiAgICAgICAgbmFtZSA9IFwicGFwZXJtYy1yZXBvXCJcbiAgICAgICAgdXJsID0gXCJodHRwczovL3JlcG8ucGFwZXJtYy5pby9yZXBvc2l0b3J5L21hdmVuLXB1YmxpYy9cIlxuICAgIH1cbiAgICBtYXZlbiB7XG4gICAgICAgIG5hbWUgPSBcInNvbmF0eXBlXCJcbiAgICAgICAgdXJsID0gXCJodHRwczovL29zcy5zb25hdHlwZS5vcmcvY29udGVudC9ncm91cHMvcHVibGljL1wiXG4gICAgfVxufVxuXG5kZXBlbmRlbmNpZXMge1xuICAgIGNvbXBpbGVPbmx5KFwiaW8ucGFwZXJtYy5wYXBlcjpwYXBlci1hcGk6MS4yMS40LVIwLjEtU05BUFNIT1RcIilcbiAgICBjb21waWxlT25seShcIm9yZy5wcm9qZWN0bG9tYm9rOmxvbWJvazoxLjE4LjM4XCIpXG4gICAgYW5ub3RhdGlvblByb2Nlc3NvcihcIm9yZy5wcm9qZWN0bG9tYm9rOmxvbWJvazoxLjE4LjM4XCIpXG59XG5cbnRhc2tzIHtcbiAgICBydW5TZXJ2ZXIge1xuICAgICAgICAvLyBDb25maWd1cmUgdGhlIE1pbmVjcmFmdCB2ZXJzaW9uIGZvciBvdXIgdGFzay5cbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgb25seSByZXF1aXJlZCBjb25maWd1cmF0aW9uIGJlc2lkZXMgYXBwbHlpbmcgdGhlIHBsdWdpbi5cbiAgICAgICAgLy8gWW91ciBwbHVnaW4ncyBqYXIgKG9yIHNoYWRvd0phciBpZiBwcmVzZW50KSB3aWxsIGJlIHVzZWQgYXV0b21hdGljYWxseS5cbiAgICAgICAgbWluZWNyYWZ0VmVyc2lvbihcIjEuMjFcIilcbiAgICB9XG59XG5cbmRlZiB0YXJnZXRKYXZhVmVyc2lvbiA9IDIxXG5qYXZhIHtcbiAgICBkZWYgamF2YVZlcnNpb24gPSBKYXZhVmVyc2lvbi50b1ZlcnNpb24odGFyZ2V0SmF2YVZlcnNpb24pXG4gICAgc291cmNlQ29tcGF0aWJpbGl0eSA9IGphdmFWZXJzaW9uXG4gICAgdGFyZ2V0Q29tcGF0aWJpbGl0eSA9IGphdmFWZXJzaW9uXG4gICAgaWYgKEphdmFWZXJzaW9uLmN1cnJlbnQoKSA8IGphdmFWZXJzaW9uKSB7XG4gICAgICAgIHRvb2xjaGFpbi5sYW5ndWFnZVZlcnNpb24gPSBKYXZhTGFuZ3VhZ2VWZXJzaW9uLm9mKHRhcmdldEphdmFWZXJzaW9uKVxuICAgIH1cbn1cblxudGFza3Mud2l0aFR5cGUoSmF2YUNvbXBpbGUpLmNvbmZpZ3VyZUVhY2gge1xuICAgIG9wdGlvbnMuZW5jb2RpbmcgPSAnVVRGLTgnXG5cbiAgICBpZiAodGFyZ2V0SmF2YVZlcnNpb24gPj0gMTAgfHwgSmF2YVZlcnNpb24uY3VycmVudCgpLmlzSmF2YTEwQ29tcGF0aWJsZSgpKSB7XG4gICAgICAgIG9wdGlvbnMucmVsZWFzZS5zZXQodGFyZ2V0SmF2YVZlcnNpb24pXG4gICAgfVxufVxuXG5wcm9jZXNzUmVzb3VyY2VzIHtcbiAgICBkZWYgcHJvcHMgPSBbdmVyc2lvbjogdmVyc2lvbl1cbiAgICBpbnB1dHMucHJvcGVydGllcyBwcm9wc1xuICAgIGZpbHRlcmluZ0NoYXJzZXQgJ1VURi04J1xuICAgIGZpbGVzTWF0Y2hpbmcoJ3BsdWdpbi55bWwnKSB7XG4gICAgICAgIGV4cGFuZCBwcm9wc1xuICAgIH1cbn1cbi4uLlxuUGF0aDogLmdyYWRsZS9idWlsZE91dHB1dENsZWFudXAvY2FjaGUucHJvcGVydGllc1xuI1NhdCBBcHIgMDUgMDA6MzY6MjYgQ0VTVCAyMDI1XG5ncmFkbGUudmVyc2lvbj04Ljhcbi4uLlxuUGF0aDogc2V0dGluZ3MuZ3JhZGxlXG5yb290UHJvamVjdC5uYW1lID0gJ0RldlN5c3RlbSdcbi4uLlxuUGF0aDogZ3JhZGxlL3dyYXBwZXIvZ3JhZGxlLXdyYXBwZXIucHJvcGVydGllc1xuZGlzdHJpYnV0aW9uQmFzZT1HUkFETEVfVVNFUl9IT01FXG5kaXN0cmlidXRpb25QYXRoPXdyYXBwZXIvZGlzdHNcbmRpc3RyaWJ1dGlvblVybD1odHRwc1xcOi8vc2VydmljZXMuZ3JhZGxlLm9yZy9kaXN0cmlidXRpb25zL2dyYWRsZS04LjgtYmluLnppcFxubmV0d29ya1RpbWVvdXQ9MTAwMDBcbnZhbGlkYXRlRGlzdHJpYnV0aW9uVXJsPXRydWVcbnppcFN0b3JlQmFzZT1HUkFETEVfVVNFUl9IT01FXG56aXBTdG9yZVBhdGg9d3JhcHBlci9kaXN0c1xuLi4uXG5QYXRoOiBncmFkbGV3LmJhdFxuQHJlbVxuQHJlbSBDb3B5cmlnaHQgMjAxNSB0aGUgb3JpZ2luYWwgYXV0aG9yIG9yIGF1dGhvcnMuXG5AcmVtXG5AcmVtIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG5AcmVtIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbkByZW0gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5AcmVtXG5AcmVtICAgICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuQHJlbVxuQHJlbSBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5AcmVtIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbkByZW0gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5AcmVtIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbkByZW0gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5AcmVtXG5cbkBpZiBcIiVERUJVRyVcIj09XCJcIiBAZWNobyBvZmZcbkByZW0gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbkByZW1cbkByZW0gIEdyYWRsZSBzdGFydHVwIHNjcmlwdCBmb3IgV2luZG93c1xuQHJlbVxuQHJlbSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuXG5AcmVtIFNldCBsb2NhbCBzY29wZSBmb3IgdGhlIHZhcmlhYmxlcyB3aXRoIHdpbmRvd3MgTlQgc2hlbGxcbmlmIFwiJU9TJVwiPT1cIldpbmRvd3NfTlRcIiBzZXRsb2NhbFxuXG5zZXQgRElSTkFNRT0lfmRwMFxuaWYgXCIlRElSTkFNRSVcIj09XCJcIiBzZXQgRElSTkFNRT0uXG5AcmVtIFRoaXMgaXMgbm9ybWFsbHkgdW51c2VkXG5zZXQgQVBQX0JBU0VfTkFNRT0lfm4wXG5zZXQgQVBQX0hPTUU9JURJUk5BTUUlXG5cbkByZW0gUmVzb2x2ZSBhbnkgXCIuXCIgYW5kIFwiLi5cIiBpbiBBUFBfSE9NRSB0byBtYWtlIGl0IHNob3J0ZXIuXG5mb3IgJSVpIGluIChcIiVBUFBfSE9NRSVcIikgZG8gc2V0IEFQUF9IT01FPSUlfmZpXG5cbkByZW0gQWRkIGRlZmF1bHQgSlZNIG9wdGlvbnMgaGVyZS4gWW91IGNhbiBhbHNvIHVzZSBKQVZBX09QVFMgYW5kIEdSQURMRV9PUFRTIHRvIHBhc3MgSlZNIG9wdGlvbnMgdG8gdGhpcyBzY3JpcHQuXG5zZXQgREVGQVVMVF9KVk1fT1BUUz1cIi1YbXg2NG1cIiBcIi1YbXM2NG1cIlxuLi4uXG5cbjpleGVjdXRlXG5AcmVtIFNldHVwIHRoZSBjb21tYW5kIGxpbmVcblxuc2V0IENMQVNTUEFUSD0lQVBQX0hPTUUlXFxncmFkbGVcXHdyYXBwZXJcXGdyYWRsZS13cmFwcGVyLmphclxuXG5cbkByZW0gRXhlY3V0ZSBHcmFkbGVcblwiJUpBVkFfRVhFJVwiICVERUZBVUxUX0pWTV9PUFRTJSAlSkFWQV9PUFRTJSAlR1JBRExFX09QVFMlIFwiLURvcmcuZ3JhZGxlLmFwcG5hbWU9JUFQUF9CQVNFX05BTUUlXCIgLWNsYXNzcGF0aCBcIiVDTEFTU1BBVEglXCIgb3JnLmdyYWRsZS53cmFwcGVyLkdyYWRsZVdyYXBwZXJNYWluICUqXG5cbjplbmRcbkByZW0gRW5kIGxvY2FsIHNjb3BlIGZvciB0aGUgdmFyaWFibGVzIHdpdGggd2luZG93cyBOVCBzaGVsbFxuaWYgJUVSUk9STEVWRUwlIGVxdSAwIGdvdG8gbWFpbkVuZFxuXG46ZmFpbFxucmVtIFNldCB2YXJpYWJsZSBHUkFETEVfRVhJVF9DT05TT0xFIGlmIHlvdSBuZWVkIHRoZSBfc2NyaXB0XyByZXR1cm4gY29kZSBpbnN0ZWFkIG9mXG5yZW0gdGhlIF9jbWQuZXhlIC9jXyByZXR1cm4gY29kZSFcbnNldCBFWElUX0NPREU9JUVSUk9STEVWRUwlXG5pZiAlRVhJVF9DT0RFJSBlcXUgMCBzZXQgRVhJVF9DT0RFPTFcbmlmIG5vdCBcIlwiPT1cIiVHUkFETEVfRVhJVF9DT05TT0xFJVwiIGV4aXQgJUVYSVRfQ09ERSVcbmV4aXQgL2IgJUVYSVRfQ09ERSVcblxuOm1haW5FbmRcbmlmIFwiJU9TJVwiPT1cIldpbmRvd3NfTlRcIiBlbmRsb2NhbFxuXG46b21lZ2Fcbi4uLlxuUGF0aDogZ3JhZGxld1xuIyEvYmluL3NoXG5cbiNcbiMgQ29weXJpZ2h0IMKpIDIwMTUtMjAyMSB0aGUgb3JpZ2luYWwgYXV0aG9ycy5cbiNcbiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiMgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuIyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiNcbiMgICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4jXG4jIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiMgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiNcbi4uLlxuIyAgICAgICBhbmQgR1JBRExFX09QVFMpIHJlbHkgb24gd29yZC1zcGxpdHRpbmcsIHRoaXMgaXMgcGVyZm9ybWVkIGV4cGxpY2l0bHk7XG4jICAgICAgIHNlZSB0aGUgaW4tbGluZSBjb21tZW50cyBmb3IgZGV0YWlscy5cbiNcbiMgICAgICAgVGhlcmUgYXJlIHR3ZWFrcyBmb3Igc3BlY2lmaWMgb3BlcmF0aW5nIHN5c3RlbXMgc3VjaCBhcyBBSVgsIEN5Z1dpbixcbiMgICAgICAgRGFyd2luLCBNaW5HVywgYW5kIE5vblN0b3AuXG4jXG4jICAgKDMpIFRoaXMgc2NyaXB0IGlzIGdlbmVyYXRlZCBmcm9tIHRoZSBHcm9vdnkgdGVtcGxhdGVcbiMgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2dyYWRsZS9ncmFkbGUvYmxvYi9IRUFEL3BsYXRmb3Jtcy9qdm0vcGx1Z2lucy1hcHBsaWNhdGlvbi9zcmMvbWFpbi9yZXNvdXJjZXMvb3JnL2dyYWRsZS9hcGkvaW50ZXJuYWwvcGx1Z2lucy91bml4U3RhcnRTY3JpcHQudHh0XG4jICAgICAgIHdpdGhpbiB0aGUgR3JhZGxlIHByb2plY3QuXG4jXG4jICAgICAgIFlvdSBjYW4gZmluZCBHcmFkbGUgYXQgaHR0cHM6Ly9naXRodWIuY29tL2dyYWRsZS9ncmFkbGUvLlxuI1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbiMgQXR0ZW1wdCB0byBzZXQgQVBQX0hPTUVcblxuIyBSZXNvbHZlIGxpbmtzOiAkMCBtYXkgYmUgYSBsaW5rXG5hcHBfcGF0aD0kMFxuXG4jIE5lZWQgdGhpcyBmb3IgZGFpc3ktY2hhaW5lZCBzeW1saW5rcy5cbndoaWxlXG4gICAgQVBQX0hPTUU9JHthcHBfcGF0aCVcIiR7YXBwX3BhdGgjIyovfVwifSAgIyBsZWF2ZXMgYSB0cmFpbGluZyAvOyBlbXB0eSBpZiBubyBsZWFkaW5nIHBhdGhcbiAgICBbIC1oIFwiJGFwcF9wYXRoXCIgXVxuZG9cbiAgICBscz0kKCBscyAtbGQgXCIkYXBwX3BhdGhcIiApXG4gICAgbGluaz0ke2xzIyonIC0+ICd9XG4gICAgY2FzZSAkbGluayBpbiAgICAgICAgICAgICAjKFxuICAgICAgLyopICAgYXBwX3BhdGg9JGxpbmsgOzsgIyhcbiAgICAgICopICAgIGFwcF9wYXRoPSRBUFBfSE9NRSRsaW5rIDs7XG4gICAgZXNhY1xuZG9uZVxuXG4jIFRoaXMgaXMgbm9ybWFsbHkgdW51c2VkXG4jIHNoZWxsY2hlY2sgZGlzYWJsZT1TQzIwMzRcbkFQUF9CQVNFX05BTUU9JHswIyMqL31cbiMgRGlzY2FyZCBjZCBzdGFuZGFyZCBvdXRwdXQgaW4gY2FzZSAkQ0RQQVRIIGlzIHNldCAoaHR0cHM6Ly9naXRodWIuY29tL2dyYWRsZS9ncmFkbGUvaXNzdWVzLzI1MDM2KVxuQVBQX0hPTUU9JCggY2QgXCIke0FQUF9IT01FOi0uL31cIiA+IC9kZXYvbnVsbCAmJiBwd2QgLVAgKSB8fCBleGl0XG5cbiMgVXNlIHRoZSBtYXhpbXVtIGF2YWlsYWJsZSwgb3Igc2V0IE1BWF9GRCAhPSAtMSB0byB1c2UgdGhhdCB2YWx1ZS5cbk1BWF9GRD1tYXhpbXVtXG5cbndhcm4gKCkge1xuICAgIGVjaG8gXCIkKlwiXG59ID4mMlxuXG5kaWUgKCkge1xuICAgIGVjaG9cbiAgICBlY2hvIFwiJCpcIlxuICAgIGVjaG9cbiAgICBleGl0IDFcbn0gPiYyXG5cbiMgT1Mgc3BlY2lmaWMgc3VwcG9ydCAobXVzdCBiZSAndHJ1ZScgb3IgJ2ZhbHNlJykuXG5jeWd3aW49ZmFsc2Vcbm1zeXM9ZmFsc2VcbmRhcndpbj1mYWxzZVxubm9uc3RvcD1mYWxzZVxuY2FzZSBcIiQoIHVuYW1lIClcIiBpbiAgICAgICAgICAgICAgICAjKFxuICBDWUdXSU4qICkgICAgICAgICBjeWd3aW49dHJ1ZSAgOzsgIyhcbiAgRGFyd2luKiApICAgICAgICAgZGFyd2luPXRydWUgIDs7ICMoXG4gIE1TWVMqIHwgTUlOR1cqICkgIG1zeXM9dHJ1ZSAgICA7OyAjKFxuICBOT05TVE9QKiApICAgICAgICBub25zdG9wPXRydWUgOztcbmVzYWNcblxuQ0xBU1NQQVRIPSRBUFBfSE9NRS9ncmFkbGUvd3JhcHBlci9ncmFkbGUtd3JhcHBlci5qYXJcblxuXG4jIERldGVybWluZSB0aGUgSmF2YSBjb21tYW5kIHRvIHVzZSB0byBzdGFydCB0aGUgSlZNLlxuaWYgWyAtbiBcIiRKQVZBX0hPTUVcIiBdIDsgdGhlblxuICAgIGlmIFsgLXggXCIkSkFWQV9IT01FL2pyZS9zaC9qYXZhXCIgXSA7IHRoZW5cbiAgICAgICAgIyBJQk0ncyBKREsgb24gQUlYIHVzZXMgc3RyYW5nZSBsb2NhdGlvbnMgZm9yIHRoZSBleGVjdXRhYmxlc1xuICAgICAgICBKQVZBQ01EPSRKQVZBX0hPTUUvanJlL3NoL2phdmFcbiAgICBlbHNlXG4gICAgICAgIEpBVkFDTUQ9JEpBVkFfSE9NRS9iaW4vamF2YVxuICAgIGZpXG4gICAgaWYgWyAhIC14IFwiJEpBVkFDTURcIiBdIDsgdGhlblxuICAgICAgICBkaWUgXCJFUlJPUjogSkFWQV9IT01FIGlzIHNldCB0byBhbiBpbnZhbGlkIGRpcmVjdG9yeTogJEpBVkFfSE9NRVxuXG5QbGVhc2Ugc2V0IHRoZSBKQVZBX0hPTUUgdmFyaWFibGUgaW4geW91ciBlbnZpcm9ubWVudCB0byBtYXRjaCB0aGVcbmxvY2F0aW9uIG9mIHlvdXIgSmF2YSBpbnN0YWxsYXRpb24uXCJcbiAgICBmaVxuZWxzZVxuICAgIEpBVkFDTUQ9amF2YVxuICAgIGlmICEgY29tbWFuZCAtdiBqYXZhID4vZGV2L251bGwgMj4mMVxuICAgIHRoZW5cbiAgICAgICAgZGllIFwiRVJST1I6IEpBVkFfSE9NRSBpcyBub3Qgc2V0IGFuZCBubyAnamF2YScgY29tbWFuZCBjb3VsZCBiZSBmb3VuZCBpbiB5b3VyIFBBVEguXG5cblBsZWFzZSBzZXQgdGhlIEpBVkFfSE9NRSB2YXJpYWJsZSBpbiB5b3VyIGVudmlyb25tZW50IHRvIG1hdGNoIHRoZVxubG9jYXRpb24gb2YgeW91ciBKYXZhIGluc3RhbGxhdGlvbi5cIlxuICAgIGZpXG5maVxuLi4uXG5cbiMgQ29sbGVjdCBhbGwgYXJndW1lbnRzIGZvciB0aGUgamF2YSBjb21tYW5kLCBzdGFja2luZyBpbiByZXZlcnNlIG9yZGVyOlxuIyAgICogYXJncyBmcm9tIHRoZSBjb21tYW5kIGxpbmVcbiMgICAqIHRoZSBtYWluIGNsYXNzIG5hbWVcbiMgICAqIC1jbGFzc3BhdGhcbiMgICAqIC1ELi4uYXBwbmFtZSBzZXR0aW5nc1xuIyAgICogLS1tb2R1bGUtcGF0aCAob25seSBpZiBuZWVkZWQpXG4jICAgKiBERUZBVUxUX0pWTV9PUFRTLCBKQVZBX09QVFMsIGFuZCBHUkFETEVfT1BUUyBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG5cbiMgRm9yIEN5Z3dpbiBvciBNU1lTLCBzd2l0Y2ggcGF0aHMgdG8gV2luZG93cyBmb3JtYXQgYmVmb3JlIHJ1bm5pbmcgamF2YVxuaWYgXCIkY3lnd2luXCIgfHwgXCIkbXN5c1wiIDsgdGhlblxuICAgIEFQUF9IT01FPSQoIGN5Z3BhdGggLS1wYXRoIC0tbWl4ZWQgXCIkQVBQX0hPTUVcIiApXG4gICAgQ0xBU1NQQVRIPSQoIGN5Z3BhdGggLS1wYXRoIC0tbWl4ZWQgXCIkQ0xBU1NQQVRIXCIgKVxuXG4gICAgSkFWQUNNRD0kKCBjeWdwYXRoIC0tdW5peCBcIiRKQVZBQ01EXCIgKVxuLi4uXG4gICAgICAgIHNoaWZ0ICAgICAgICAgICAgICAgICAgICMgcmVtb3ZlIG9sZCBhcmdcbiAgICAgICAgc2V0IC0tIFwiJEBcIiBcIiRhcmdcIiAgICAgICMgcHVzaCByZXBsYWNlbWVudCBhcmdcbiAgICBkb25lXG5maVxuXG5cbiMgQWRkIGRlZmF1bHQgSlZNIG9wdGlvbnMgaGVyZS4gWW91IGNhbiBhbHNvIHVzZSBKQVZBX09QVFMgYW5kIEdSQURMRV9PUFRTIHRvIHBhc3MgSlZNIG9wdGlvbnMgdG8gdGhpcyBzY3JpcHQuXG5ERUZBVUxUX0pWTV9PUFRTPSdcIi1YbXg2NG1cIiBcIi1YbXM2NG1cIidcblxuIyBDb2xsZWN0IGFsbCBhcmd1bWVudHMgZm9yIHRoZSBqYXZhIGNvbW1hbmQ6XG4jICAgKiBERUZBVUxUX0pWTV9PUFRTLCBKQVZBX09QVFMsIEpBVkFfT1BUUywgYW5kIG9wdHNFbnZpcm9ubWVudFZhciBhcmUgbm90IGFsbG93ZWQgdG8gY29udGFpbiBzaGVsbCBmcmFnbWVudHMsXG4jICAgICBhbmQgYW55IGVtYmVkZGVkIHNoZWxsbmVzcyB3aWxsIGJlIGVzY2FwZWQuXG4jICAgKiBGb3IgZXhhbXBsZTogQSB1c2VyIGNhbm5vdCBleHBlY3QgJHtIb3N0bmFtZX0gdG8gYmUgZXhwYW5kZWQsIGFzIGl0IGlzIGFuIGVudmlyb25tZW50IHZhcmlhYmxlIGFuZCB3aWxsIGJlXG4jICAgICB0cmVhdGVkIGFzICcke0hvc3RuYW1lfScgaXRzZWxmIG9uIHRoZSBjb21tYW5kIGxpbmUuXG5cbnNldCAtLSBcXFxuICAgICAgICBcIi1Eb3JnLmdyYWRsZS5hcHBuYW1lPSRBUFBfQkFTRV9OQU1FXCIgXFxcbiAgICAgICAgLWNsYXNzcGF0aCBcIiRDTEFTU1BBVEhcIiBcXFxuICAgICAgICBvcmcuZ3JhZGxlLndyYXBwZXIuR3JhZGxlV3JhcHBlck1haW4gXFxcbiAgICAgICAgXCIkQFwiXG5cbiMgU3RvcCB3aGVuIFwieGFyZ3NcIiBpcyBub3QgYXZhaWxhYmxlLlxuaWYgISBjb21tYW5kIC12IHhhcmdzID4vZGV2L251bGwgMj4mMVxudGhlblxuICAgIGRpZSBcInhhcmdzIGlzIG5vdCBhdmFpbGFibGVcIlxuZmlcbi4uLlxuXG5ldmFsIFwic2V0IC0tICQoXG4gICAgICAgIHByaW50ZiAnJXNcXG4nIFwiJERFRkFVTFRfSlZNX09QVFMgJEpBVkFfT1BUUyAkR1JBRExFX09QVFNcIiB8XG4gICAgICAgIHhhcmdzIC1uMSB8XG4gICAgICAgIHNlZCAnIHN+W14tWzphbG51bTpdKywuLzo9QF9dflxcXFwmfmc7ICcgfFxuICAgICAgICB0ciAnXFxuJyAnICdcbiAgICApXCIgJ1wiJEBcIidcblxuZXhlYyBcIiRKQVZBQ01EXCIgXCIkQFwiXG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9wbHVnaW4ueW1sXG5uYW1lOiBEZXZTeXN0ZW1cbnZlcnNpb246ICcxLjAnXG5tYWluOiBkZS5zdGV5b24uZGV2U3lzdGVtLkRldlN5c3RlbVxuYXBpLXZlcnNpb246ICcxLjIxJ1xuYXV0aG9yczogWyBTdGV5T24gXVxuZGVzY3JpcHRpb246IE9mZmljaWFsIFN0ZXlPbiBEZXZlbG9wZXIgU3lzdGVtIGZvciBNaW5lY3JhZnQgU2VydmVyc1xud2Vic2l0ZTogaHR0cHM6Ly9naXRodWIuY29tL1N0ZXlPblxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2l0ZW0vSXRlbUJ1aWxkZXIuamF2YVxuLi4uXG5cblxuICAgIHB1YmxpYyBJdGVtQnVpbGRlciBjbGVhckFsbEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHRoaXMuaXRlbVN0YWNrLmVkaXRNZXRhKGl0ZW1NZXRhIC0+IHtcbiAgICAgICAgICAgIGl0ZW1NZXRhLmFkZEl0ZW1GbGFncyhJdGVtRmxhZy52YWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgSXRlbUJ1aWxkZXIgYW1vdW50KGludCBhbW91bnQpIHtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2suc2V0QW1vdW50KGFtb3VudCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBJdGVtQnVpbGRlciBsb3JlV3JhcChATm90TnVsbCBDb21wb25lbnQgZGVzZXJpYWxpemUpIHtcbiAgICAgICAgSXRlbU1ldGEgaXRlbU1ldGEgPSBpdGVtU3RhY2suZ2V0SXRlbU1ldGEoKTtcbiAgICAgICAgTGlzdDxDb21wb25lbnQ+IGxvcmUgPSBpdGVtTWV0YS5sb3JlKCk7XG4gICAgICAgIGlmIChsb3JlID09IG51bGwpIHtcbiAgICAgICAgICAgIGxvcmUgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgfVxuICAgICAgICBsb3JlLmFkZChkZXNlcmlhbGl6ZSk7XG4gICAgICAgIGl0ZW1NZXRhLmxvcmUobG9yZSk7XG4gICAgICAgIGl0ZW1TdGFjay5zZXRJdGVtTWV0YShpdGVtTWV0YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBJdGVtQnVpbGRlciBnbG93KCl7XG4gICAgICAgIGl0ZW1TdGFjay5hZGRVbnNhZmVFbmNoYW50bWVudChFbmNoYW50bWVudC5EVVJBQklMSVRZLCAxKTtcbiAgICAgICAgSXRlbU1ldGEgaXRlbU1ldGEgPSBpdGVtU3RhY2suZ2V0SXRlbU1ldGEoKTtcbiAgICAgICAgaXRlbU1ldGEuYWRkSXRlbUZsYWdzKEl0ZW1GbGFnLkhJREVfRU5DSEFOVFMpO1xuICAgICAgICBpdGVtU3RhY2suc2V0SXRlbU1ldGEoaXRlbU1ldGEpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvU3RleU9uSW52LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgU3RleU9uSW52IHtcblxuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEludmVudG9yeSBpbnZlbnRvcnk7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQXJyYXlMaXN0PEFjdGl2ZUl0ZW0+IGFjdGl2ZUl0ZW1zO1xuICAgIHByaXZhdGUgZmluYWwgUGx1Z2luIG1haW5DbGFzcztcbiAgICBwcml2YXRlIGZpbmFsIFBsYXllciBwbGF5ZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgc2l6ZTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBDb21wb25lbnQgdGl0bGU7XG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeU9wZW5FdmVudD4gb3BlbkFjdGlvbjtcbiAgICBwcml2YXRlIEludmVudG9yeUV2ZW50TGlzdGVuZXIgbGlzdGVuZXI7XG4gICAgQEdldHRlclxuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlDbG9zZUV2ZW50PiBjbG9zZUFjdGlvbjtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBTdHJpbmdbXSBwYXR0ZXJuO1xuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcbnBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbTtcblxuaW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcblxucHVibGljIGZpbmFsIGNsYXNzIERldlN5c3RlbSBleHRlbmRzIEphdmFQbHVnaW4ge1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG4gICAgICAgIC8vIFBsdWdpbiBzdGFydHVwIGxvZ2ljXG5cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvUmlvbkludi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFJpb25JbnYge1xuXG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgSW52ZW50b3J5IGludmVudG9yeTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBBcnJheUxpc3Q8QWN0aXZlSXRlbT4gYWN0aXZlSXRlbXM7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbHVnaW4gbWFpbkNsYXNzO1xuICAgIHByaXZhdGUgZmluYWwgUGxheWVyIHBsYXllcjtcbiAgICBwcml2YXRlIGZpbmFsIGludCBzaXplO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIENvbXBvbmVudCB0aXRsZTtcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBvcGVuQWN0aW9uO1xuICAgIHByaXZhdGUgSW52ZW50b3J5RXZlbnRMaXN0ZW5lciBsaXN0ZW5lcjtcbiAgICBAR2V0dGVyXG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGNsb3NlQWN0aW9uO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIFN0cmluZ1tdIHBhdHRlcm47XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaW52L2l0ZW0vQWN0aXZlSXRlbS5qYXZhXG4uLi5cblxuQEdldHRlclxucHVibGljIGNsYXNzIEFjdGl2ZUl0ZW0ge1xuXG4gICAgcHJpdmF0ZSBmaW5hbCBJdGVtU3RhY2sgaXRlbVN0YWNrO1xuICAgIHByaXZhdGUgQ29uc3VtZXI8SW52ZW50b3J5Q2xpY2tFdmVudD4gYWN0aW9uO1xuXG4gICAgcHVibGljIEFjdGl2ZUl0ZW0oSXRlbVN0YWNrIGl0ZW1TdGFjaykge1xuICAgICAgICB0aGlzLml0ZW1TdGFjayA9IGl0ZW1TdGFjaztcbiAgICB9XG5cbiAgICBwdWJsaWMgQWN0aXZlSXRlbSBjbGljayhDb25zdW1lcjxJbnZlbnRvcnlDbGlja0V2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKHRoaXMuaGFzaENvZGUoKSArIFwiIFwiICsgXCJhY3RpdmVJdGVtSGFzaENvZGVJbkFjdGl2ZUl0ZW1DbGFzc1wiICsgdGhpcy5pdGVtU3RhY2suZ2V0VHlwZSgpLm5hbWUoKSk7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBARXZlbnRIYW5kbGVyXG4gICAgcHVibGljIHZvaWQgaGFuZGxlQ2xpY2soSW52ZW50b3J5Q2xpY2tFdmVudCBldmVudCkge1xuICAgICAgICBpZiAoYWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIGFjdGlvbi5hY2NlcHQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTlDQ0hEYmdBZkg4UEpBbXpHQWJSaksifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiR3JlYXQhIEkgY2FuIHNlZSB0aGF0IExvbWJvayBpcyBhbHJlYWR5IGluY2x1ZGVkIGluIHRoZSBwcm9qZWN0IGRlcGVuZGVuY2llczpcblxuYGBgZ3JhZGxlXG5kZXBlbmRlbmNpZXMge1xuICAgIGNvbXBpbGVPbmx5KFwiaW8ucGFwZXJtYy5wYXBlcjpwYXBlci1hcGk6MS4yMS40LVIwLjEtU05BUFNIT1RcIilcbiAgICBjb21waWxlT25seShcIm9yZy5wcm9qZWN0bG9tYm9rOmxvbWJvazoxLjE4LjM4XCIpXG4gICAgYW5ub3RhdGlvblByb2Nlc3NvcihcIm9yZy5wcm9qZWN0bG9tYm9rOmxvbWJvazoxLjE4LjM4XCIpXG59XG5gYGBcblxuQW5kIEkgY2FuIGFsc28gc2VlIHRoYXQgTG9tYm9rJ3MgYEBHZXR0ZXJgIGFubm90YXRpb24gaXMgYWxyZWFkeSBiZWluZyB1c2VkIGluIG90aGVyIGNsYXNzZXMgbGlrZSBgU3RleU9uSW52YCwgYFJpb25JbnZgLCBhbmQgYEFjdGl2ZUl0ZW1gLlxuXG5Ob3csIGxldCdzIHVwZGF0ZSB0aGUgRGV2U3lzdGVtIGNsYXNzIHRvIHVzZSBMb21ib2sncyBgQEdldHRlcmAgYW5ub3RhdGlvbiBpbnN0ZWFkIG9mIG1hbnVhbGx5IHdyaXRpbmcgdGhlIGdldHRlciBtZXRob2Q6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiM2E3ODY5ZGUtZWZmZS00ODM1LTlhZDItMDZhMmUwODc1MWIzIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxRnB6U0tMM3NDbWlDRnJjSHFpTDQ0cyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmFcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBmaXggdGhlIGlzc3VlcyB3aXRoIHRoZSByZXBsYWNlbWVudHM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InVuc2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlBhcnRpYWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhLiBTZWUgYmVsb3cgZm9yIGRldGFpbHMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5ObyByZXBsYWNlbWVudCB3YXMgcGVyZm9ybWVkLCBvbGRTdHIgZGlkIG5vdCBhcHBlYXIgdmVyYmF0aW0gaW4gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAgMTVcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxNlx0XG4gICAgMTdcdCAgICB9XG4gICAgMThcdFxuICAgIDE5XHQgICAgQE92ZXJyaWRlXG4gICAgMjBcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjFcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjJcdCAgICB9XG4gICAgMjNcdFxuICAgIDI0XHRcbiAgICAyNVx0ICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyIGdldEludmVudG9yeU1hbmFnZXIoKSB7XG4gICAgMjZcdCAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgMjdcdCAgICB9XG4gICAgMjhcdH1cbiAgICAyOVx0XG5cbkRpZmYgYmV0d2VlbiBvbGRTdHIgYW5kIHRoZSBzcGVjaWZpZWQgcmVnaW9uIGlzOlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLS0tIG9sZFN0clxuKysrIHJlZ2lvbkNvbnRlbnRcbkBAIC0zLDEwICszLDkgQEBcbiAgICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgICB9XG4gXG4tICAgIC8qKlxuLSAgICAgKiBHZXQgdGhlIGludmVudG9yeSBtYW5hZ2VyIGluc3RhbmNlXG4tICAgICAqIEByZXR1cm4gVGhlIGludmVudG9yeSBtYW5hZ2VyXG4tICAgICAqL1xuK1xuICAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlciBnZXRJbnZlbnRvcnlNYW5hZ2VyKCkge1xuICAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgIH1cbit9XG4rXG5cblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDFcdHBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlci5JbnZlbnRvcnlNYW5hZ2VyO1xuICAgICA0XHRpbXBvcnQgbG9tYm9rLkdldHRlcjtcbiAgICAgNVx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgOFx0XG4gICAgIDlcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAxMFx0XG4gICAgMTFcdCAgICBAR2V0dGVyXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1syXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICA3XHRpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG4gICAgIDhcdFxuICAgICA5XHRwdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XG4gICAgMTBcdFxuICAgIDExXHQgICAgQEdldHRlclxuICAgIDEyXHQgICAgcHJpdmF0ZSBJbnZlbnRvcnlNYW5hZ2VyIGludmVudG9yeU1hbmFnZXI7XG4gICAgMTNcdFxuICAgIDE0XHRcbiAgICAxNVx0ICAgIEBPdmVycmlkZVxuICAgIDE2XHQgICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2VfZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxTVhiQ0VhNGQ1QkI0SjlDaXZNblVyViJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJMZXQgbWUgZml4IHRoZSBpc3N1ZXMgd2l0aCB0aGUgcmVwbGFjZW1lbnRzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImQyN2NlYzk3LThlYzEtNDFlNy1hYWFiLTI0OWFiNGE0MmU4ZCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMTRUWDd3TjdldkpMY3IxZGlBWUtESGYiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9EZXZTeXN0ZW0uamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcXG4gICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xcbiAgICB9XFxuXFxuXFxuICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyIGdldEludmVudG9yeU1hbmFnZXIoKSB7XFxuICAgICAgICByZXR1cm4gaW52ZW50b3J5TWFuYWdlcjtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcXG4gICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAyOX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSBuZWVkIHRvIHJlbW92ZSB0aGUgbWFudWFsIGdldHRlciBtZXRob2Qgc2luY2Ugd2UncmUgbm93IHVzaW5nIExvbWJvaydzIGBAR2V0dGVyYCBhbm5vdGF0aW9uOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJ1bnNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9EZXZTeXN0ZW0uamF2YTpcbiAgICAgMVx0cGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyLkludmVudG9yeU1hbmFnZXI7XG4gICAgIDRcdGltcG9ydCBsb21ib2suR2V0dGVyO1xuICAgICA1XHRpbXBvcnQgb3JnLmJ1a2tpdC5wbHVnaW4uamF2YS5KYXZhUGx1Z2luO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuICAgICA4XHRcbiAgICAgOVx0cHVibGljIGZpbmFsIGNsYXNzIERldlN5c3RlbSBleHRlbmRzIEphdmFQbHVnaW4ge1xuICAgIDEwXHRcbiAgICAxMVx0ICAgIEBHZXR0ZXJcbiAgICAxMlx0ICAgIHByaXZhdGUgSW52ZW50b3J5TWFuYWdlciBpbnZlbnRvcnlNYW5hZ2VyO1xuICAgIDEzXHRcbiAgICAxNFx0XG4gICAgMTVcdCAgICBAT3ZlcnJpZGVcbiAgICAxNlx0ICAgIHB1YmxpYyB2b2lkIG9uRW5hYmxlKCkge1xuICAgIDE3XHQgICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlciA9IG5ldyBJbnZlbnRvcnlNYW5hZ2VyKHRoaXMsIG5ldyBIYXNoTWFwPD4oKSk7XG4gICAgMThcdFxuICAgIDE5XHQgICAgfVxuICAgIDIwXHRcbiAgICAyMVx0ICAgIEBPdmVycmlkZVxuICAgIDIyXHQgICAgcHVibGljIHZvaWQgb25EaXNhYmxlKCkge1xuICAgIDIzXHQgICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgIDI0XHQgICAgfVxuICAgIDI1XHRcbiAgICAyNlx0XG4gICAgMjdcdCAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlciBnZXRJbnZlbnRvcnlNYW5hZ2VyKCkge1xuICAgIDI4XHQgICAgICAgIHJldHVybiBpbnZlbnRvcnlNYW5hZ2VyO1xuICAgIDI5XHQgICAgfVxuICAgIDMwXHR9XG4gICAgMzFcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMzFcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMUZwelNLTDNzQ21pQ0ZyY0hxaUw0NHMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIiwiZm9sZGVyUm9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiSSBuZWVkIHRvIHJlbW92ZSB0aGUgbWFudWFsIGdldHRlciBtZXRob2Qgc2luY2Ugd2UncmUgbm93IHVzaW5nIExvbWJvaydzIGBAR2V0dGVyYCBhbm5vdGF0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjU2ZWNmNjY1LTBjYmItNGIyOS04ZGNjLTA5MDNjNWM1NGY3NCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfdnJ0eF8wMU5XRVNHb2MyYVNOOFN2YU10U3FMZ00iLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwic3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyB2ZXJpZnkgdGhlIGZpbmFsIHJlc3VsdDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoidW5zZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAxN1x0ICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcih0aGlzLCBuZXcgSGFzaE1hcDw+KCkpO1xuICAgIDE4XHRcbiAgICAxOVx0ICAgIH1cbiAgICAyMFx0XG4gICAgMjFcdCAgICBAT3ZlcnJpZGVcbiAgICAyMlx0ICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcbiAgICAyM1x0ICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcbiAgICAyNFx0ICAgIH1cbiAgICAyNVx0fVxuICAgIDI2XHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV92cnR4XzAxNFRYN3dON2V2SkxjcjFkaUFZS0RIZiJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2phbm5pL1Byb2dyYW1taW5nL1N0ZXlPbi9EZXZTeXN0ZW0iLCJmb2xkZXJSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJMZXQncyB2ZXJpZnkgdGhlIGZpbmFsIHJlc3VsdDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiYjg1OGFlYS05MmFhLTRiOTgtYmEwOS01ZTRkODBmYTA3NTIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJQZXJmZWN0ISBJJ3ZlIHN1Y2Nlc3NmdWxseSB1cGRhdGVkIHRoZSBEZXZTeXN0ZW0gY2xhc3MgdG8gdXNlIExvbWJvaydzIGBAR2V0dGVyYCBhbm5vdGF0aW9uOlxuXG4xLiBBZGRlZCB0aGUgTG9tYm9rIGltcG9ydDogYGltcG9ydCBsb21ib2suR2V0dGVyO2BcbjIuIEFkZGVkIHRoZSBgQEdldHRlcmAgYW5ub3RhdGlvbiB0byB0aGUgYGludmVudG9yeU1hbmFnZXJgIGZpZWxkXG4zLiBSZW1vdmVkIHRoZSBtYW51YWwgZ2V0dGVyIG1ldGhvZFxuXG5UaGUgY29kZSBpcyBub3cgc2hvcnRlciBhbmQgY2xlYW5lciB3aGlsZSBtYWludGFpbmluZyB0aGUgc2FtZSBmdW5jdGlvbmFsaXR5LiBMb21ib2sgd2lsbCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIHRoZSBnZXR0ZXIgbWV0aG9kIGF0IGNvbXBpbGUgdGltZSwgc28gb3RoZXIgY2xhc3NlcyBjYW4gc3RpbGwgYWNjZXNzIHRoZSBJbnZlbnRvcnlNYW5hZ2VyIHVzaW5nIGBnZXRJbnZlbnRvcnlNYW5hZ2VyKClgLlxuXG5JcyB0aGVyZSBhbnl0aGluZyBlbHNlIHlvdSdkIGxpa2UgbWUgdG8gaGVscCB5b3Ugd2l0aD9cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoidW5zZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlci5JbnZlbnRvcnlNYW5hZ2VyO1xuICAgICA0XHRpbXBvcnQgbG9tYm9rLkdldHRlcjtcbiAgICAgNVx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgOFx0XG4gICAgIDlcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAxMFx0XG4gICAgMTFcdCAgICBAR2V0dGVyXG4gICAgMTJcdCAgICBwcml2YXRlIEludmVudG9yeU1hbmFnZXIgaW52ZW50b3J5TWFuYWdlcjtcbiAgICAxM1x0XG4gICAgMTRcdFxuICAgIDE1XHQgICAgQE92ZXJyaWRlXG4gICAgMTZcdCAgICBwdWJsaWMgdm9pZCBvbkVuYWJsZSgpIHtcbiAgICAxN1x0ICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcih0aGlzLCBuZXcgSGFzaE1hcDw+KCkpO1xuICAgIDE4XHRcbiAgICAxOVx0ICAgIH1cbiAgICAyMFx0XG4gICAgMjFcdCAgICBAT3ZlcnJpZGVcbiAgICAyMlx0ICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcbiAgICAyM1x0ICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcbiAgICAyNFx0ICAgIH1cbiAgICAyNVx0fVxuICAgIDI2XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI2XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1X3ZydHhfMDFOV0VTR29jMmFTTjhTdmFNdFNxTGdNIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovamFubmkvUHJvZ3JhbW1pbmcvU3RleU9uL0RldlN5c3RlbSIsImZvbGRlclJvb3QiOiJFOi9qYW5uaS9Qcm9ncmFtbWluZy9TdGV5T24vRGV2U3lzdGVtIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IlBlcmZlY3QhIEkndmUgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgdGhlIERldlN5c3RlbSBjbGFzcyB0byB1c2UgTG9tYm9rJ3MgYEBHZXR0ZXJgIGFubm90YXRpb246XG5cbjEuIEFkZGVkIHRoZSBMb21ib2sgaW1wb3J0OiBgaW1wb3J0IGxvbWJvay5HZXR0ZXI7YFxuMi4gQWRkZWQgdGhlIGBAR2V0dGVyYCBhbm5vdGF0aW9uIHRvIHRoZSBgaW52ZW50b3J5TWFuYWdlcmAgZmllbGRcbjMuIFJlbW92ZWQgdGhlIG1hbnVhbCBnZXR0ZXIgbWV0aG9kXG5cblRoZSBjb2RlIGlzIG5vdyBzaG9ydGVyIGFuZCBjbGVhbmVyIHdoaWxlIG1haW50YWluaW5nIHRoZSBzYW1lIGZ1bmN0aW9uYWxpdHkuIExvbWJvayB3aWxsIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgdGhlIGdldHRlciBtZXRob2QgYXQgY29tcGlsZSB0aW1lLCBzbyBvdGhlciBjbGFzc2VzIGNhbiBzdGlsbCBhY2Nlc3MgdGhlIEludmVudG9yeU1hbmFnZXIgdXNpbmcgYGdldEludmVudG9yeU1hbmFnZXIoKWAuXG5cbklzIHRoZXJlIGFueXRoaW5nIGVsc2UgeW91J2QgbGlrZSBtZSB0byBoZWxwIHlvdSB3aXRoP1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiN2I0MDUyYjAtOTljMy00MDhhLWEzODItODk5ZGIyMGEzMzFjIiwidXVpZCI6ImNhN2E2ZDk5LTUwYmYtNDUxNC05MWE5LTllYTU5ZWFjZGQzNiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0MzgwNzMwOTkwMCwidG9UaW1lc3RhbXAiOjE3NDM4MDczNjM3OTJ9XSwiZmVlZGJhY2tTdGF0ZXMiOnsidGVtcC1mZS00YjhkZTgyYi1iNDU5LTQzZTQtOGIzYS0yNzIxMDU3YzViMDAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWE0OGJmMWUwLTg3YmYtNDJlZS1iMjgyLTkzN2NiMTZjMDU0YSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZGQ3MWE2ZjItYTMwYS00OTZhLWIwYzItNWZlODM0ZDIwMmMzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1mMDNmNjJjZC1lMTZhLTQ0OTUtOTMxYy04ZDkzNDBlYmViYTkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTkxNWVkNTQ4LWJiOGQtNGJmOC05NjY2LTVhMzA0NmM3YmM2MSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTE5NmI4ZDktYjA5My00ZGIyLWE4MzYtZGU4MWFjNDE5YmUwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jNjZkNTg4Ni03ZmViLTRhYzctODA5OS1iMjdiMGIxNGI1NGYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWNiZmExOTA3LTQ0YTEtNDJkMy05NzY0LTYyMGRmYWI5YjUzNSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZDAxNDVlYzAtZDAwNC00MmU1LWE5OGEtNzI2NGVkYWE2Y2Q1Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hM2E3ZmQ2OS0yZTJiLTQ0MGItYWRkZS0xMzg3ZjIyMDkzMTkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTlkNjFhMzVhLTliNjItNDA2MS1iMmRlLTU4N2JhNGVmZThiYSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMzQ3MGI3NTEtZWI0Zi00Mjc1LTg1MjEtZjdkMzdjN2YwMmI2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01MTYyYzcxZS02YjJkLTQ0MzQtYWM5YS1hODZlYThhMzEzMDMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6eyIxMDE5MzExYy00YmEzLTRhMDYtYWU0Ni05MTQ0ZjRjNjE3ZmI7dG9vbHVfdnJ0eF8wMUIxb25oVXl2QVRLdlFHekJDd2M3S2siOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vRGV2U3lzdGVtLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlci5JbnZlbnRvcnlNYW5hZ2VyO1xuICAgICA0XHRpbXBvcnQgb3JnLmJ1a2tpdC5wbHVnaW4uamF2YS5KYXZhUGx1Z2luO1xuICAgICA1XHRcbiAgICAgNlx0aW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuICAgICA3XHRcbiAgICAgOFx0cHVibGljIGZpbmFsIGNsYXNzIERldlN5c3RlbSBleHRlbmRzIEphdmFQbHVnaW4ge1xuICAgICA5XHRcbiAgICAxMFx0XG4gICAgMTFcdFxuICAgIDEyXHQgICAgQE92ZXJyaWRlXG4gICAgMTNcdCAgICBwdWJsaWMgdm9pZCBvbkVuYWJsZSgpIHtcbiAgICAxNFx0ICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcih0aGlzLCBuZXcgSGFzaE1hcDw+KCkpO1xuICAgIDE1XHRcbiAgICAxNlx0ICAgIH1cbiAgICAxN1x0XG4gICAgMThcdCAgICBAT3ZlcnJpZGVcbiAgICAxOVx0ICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcbiAgICAyMFx0ICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcbiAgICAyMVx0ICAgIH1cbiAgICAyMlx0fVxuICAgIDIzXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDIzXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJkYjg0ODc0NS0xMmE2LTQ1MmUtOTM3Yy04NDFkYmU5NTRjZjY7dG9vbHVfdnJ0eF8wMVBEQzI4U00zMlVDV2Zjb0hINDh6dXQiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvY29udHJvbGxlci9JbnZlbnRvcnlNYW5hZ2VyLmphdmFcbnBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXI7XG5cbmltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuU3RleU9uSW52O1xuaW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5TdGV5T25JbnY7XG5pbXBvcnQgb3JnLmJ1a2tpdC5wbHVnaW4uUGx1Z2luO1xuXG5pbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG5pbXBvcnQgamF2YS51dGlsLlVVSUQ7XG5cbnB1YmxpYyBjbGFzcyBJbnZlbnRvcnlNYW5hZ2VyIHtcblxuICAgIHByaXZhdGUgZmluYWwgUGx1Z2luIG1haW5DbGFzcztcbiAgICBwcml2YXRlIGZpbmFsIEhhc2hNYXA8VVVJRCwgU3RleU9uSW52PiBjYWNoZTtcblxuICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyKFBsdWdpbiBtYWluQ2xhc3MsIEhhc2hNYXA8VVVJRCwgU3RleU9uSW52PiBjYWNoZSkge1xuICAgICAgICB0aGlzLm1haW5DbGFzcyA9IG1haW5DbGFzcztcbiAgICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIG9wZW4oVVVJRCB1dWlkLCBTdGV5T25JbnYgU3RleU9uSW52KSB7XG4gICAgICAgIHRoaXMuY2FjaGUucHV0KHV1aWQsIFN0ZXlPbkludik7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgYWRkKFVVSUQgdXVpZCwgU3RleU9uSW52IFN0ZXlPbkludikge1xuICAgICAgICBjYWNoZS5wdXQodXVpZCwgU3RleU9uSW52KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCByZW1vdmUoVVVJRCB1dWlkKSB7XG4gICAgICAgIGNhY2hlLnJlbW92ZSh1dWlkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBjbGVhcigpIHtcbiAgICAgICAgY2FjaGUuY2xlYXIoKTtcbiAgICB9XG5cbn0uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaW52L1Jpb25JbnYuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBSaW9uSW52IHtcblxuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEludmVudG9yeSBpbnZlbnRvcnk7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQXJyYXlMaXN0PEFjdGl2ZUl0ZW0+IGFjdGl2ZUl0ZW1zO1xuICAgIHByaXZhdGUgZmluYWwgUGx1Z2luIG1haW5DbGFzcztcbiAgICBwcml2YXRlIGZpbmFsIFBsYXllciBwbGF5ZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgc2l6ZTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBDb21wb25lbnQgdGl0bGU7XG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeU9wZW5FdmVudD4gb3BlbkFjdGlvbjtcbiAgICBwcml2YXRlIEludmVudG9yeUV2ZW50TGlzdGVuZXIgbGlzdGVuZXI7XG4gICAgQEdldHRlclxuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlDbG9zZUV2ZW50PiBjbG9zZUFjdGlvbjtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBTdHJpbmdbXSBwYXR0ZXJuO1xuXG4gICAgcHVibGljIFJpb25JbnYoUGx1Z2luIG1haW5DbGFzcywgaW50IHNpemUsIENvbXBvbmVudCB0aXRsZSwgUGxheWVyIHBsYXllciwgU3RyaW5nW10gcGF0dGVybikge1xuICAgICAgICB0aGlzLm1haW5DbGFzcyA9IG1haW5DbGFzcztcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICAgICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICB0aGlzLmludmVudG9yeSA9IHRoaXMubWFpbkNsYXNzLmdldFNlcnZlcigpLmNyZWF0ZUludmVudG9yeShwbGF5ZXIsIHNpemUsIHRpdGxlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVyID09IG51bGwpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyID0gbmV3IEludmVudG9yeUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyLnJlZ2lzdGVySW52ZW50b3J5KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tYWluQ2xhc3MuZ2V0U2VydmVyKCkuZ2V0UGx1Z2luTWFuYWdlcigpLnJlZ2lzdGVyRXZlbnRzKGxpc3RlbmVyLCBtYWluQ2xhc3MpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyLnJlZ2lzdGVySW52ZW50b3J5KHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBSaW9uSW52IGFkZEl0ZW0oQWN0aXZlSXRlbSBhY3RpdmVJdGVtKSB7XG4gICAgICAgIGludmVudG9yeS5hZGRJdGVtKGFjdGl2ZUl0ZW0uZ2V0SXRlbVN0YWNrKCkpO1xuICAgICAgICBhY3RpdmVJdGVtcy5hZGQoYWN0aXZlSXRlbSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBSaW9uSW52IG9uT3BlbihDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICB0aGlzLm9wZW5BY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBSaW9uSW52IG9uQ2xvc2UoQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY2xvc2VBY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgcHVibGljIHZvaWQgcmVtb3ZlSXRlbShpbnQgc2xvdCkge1xuICAgICAgICBhY3RpdmVJdGVtcy5yZW1vdmVJZihpdGVtIC0+IGl0ZW0uZ2V0SXRlbVN0YWNrKCkuZXF1YWxzKGludmVudG9yeS5nZXRJdGVtKHNsb3QpKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgb3BlbihQbGF5ZXIgcGxheWVyKSB7XG4gICAgICAgIHBsYXllci5vcGVuSW52ZW50b3J5KGludmVudG9yeSk7XG4gICAgICAgIGlmIChvcGVuQWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIEludmVudG9yeU9wZW5FdmVudCBvcGVuRXZlbnQgPSBuZXcgSW52ZW50b3J5T3BlbkV2ZW50KHBsYXllci5nZXRPcGVuSW52ZW50b3J5KCkpO1xuICAgICAgICAgICAgb3BlbkFjdGlvbi5hY2NlcHQob3BlbkV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEl0ZW0oaW50IHNsb3QsIEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSkge1xuICAgICAgICBpbnZlbnRvcnkuc2V0SXRlbShzbG90LCBhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKTtcbiAgICAgICAgYWN0aXZlSXRlbXMuYWRkKGFjdGl2ZUl0ZW0pO1xuICAgIH1cblxuXG4gICAgcHVibGljIHZvaWQgaGFuZGxlQ2xpY2soSW52ZW50b3J5Q2xpY2tFdmVudCBldmVudCkge1xuICAgICAgICBmb3IgKEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSA6IGFjdGl2ZUl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZ2V0Q3VycmVudEl0ZW0oKSAhPSBudWxsICYmIGV2ZW50LmdldEN1cnJlbnRJdGVtKCkuaXNTaW1pbGFyKGFjdGl2ZUl0ZW0uZ2V0SXRlbVN0YWNrKCkpICYmIGFjdGl2ZUl0ZW0uZ2V0QWN0aW9uKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uZ2V0QWN0aW9uKCkuYWNjZXB0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNsb3NlKEludmVudG9yeUNsb3NlRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgaWYgKGNsb3NlQWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsb3NlQWN0aW9uLmFjY2VwdChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVbkFjdGl2ZUl0ZW1zKEhhc2hNYXA8Q2hhcmFjdGVyLCBBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcykge1xuXG4gICAgICAgIGludCBzdGFydEluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKFN0cmluZyByb3cgOiBwYXR0ZXJuKSB7XG5cbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID49IHNpemUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByb3cubGVuZ3RoKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGNoYXIgYyA9IHJvdy5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW1zLmNvbnRhaW5zS2V5KGMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oc3RhcnRJbmRleCArIGksIGFjdGl2ZUl0ZW1zLmdldChjKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydEluZGV4ICs9IDk7XG4gICAgICAgIH1cblxuICAgIH1cbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvU3RleU9uSW52LmphdmFcbnBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52O1xuXG5pbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXIuSW52ZW50b3J5RXZlbnRMaXN0ZW5lcjtcbmltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuaXRlbS5BY3RpdmVJdGVtO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbmV0Lmt5b3JpLmFkdmVudHVyZS50ZXh0LkNvbXBvbmVudDtcbmltcG9ydCBvcmcuYnVra2l0LmVudGl0eS5QbGF5ZXI7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5pbnZlbnRvcnkuSW52ZW50b3J5Q2xpY2tFdmVudDtcbmltcG9ydCBvcmcuYnVra2l0LmV2ZW50LmludmVudG9yeS5JbnZlbnRvcnlDbG9zZUV2ZW50O1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuaW52ZW50b3J5LkludmVudG9yeU9wZW5FdmVudDtcbmltcG9ydCBvcmcuYnVra2l0LmludmVudG9yeS5JbnZlbnRvcnk7XG5pbXBvcnQgb3JnLmJ1a2tpdC5pbnZlbnRvcnkuSXRlbVN0YWNrO1xuaW1wb3J0IG9yZy5idWtraXQucGx1Z2luLlBsdWdpbjtcblxuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLmZ1bmN0aW9uLkNvbnN1bWVyO1xuXG5wdWJsaWMgY2xhc3MgU3RleU9uSW52IHtcblxuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEludmVudG9yeSBpbnZlbnRvcnk7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQXJyYXlMaXN0PEFjdGl2ZUl0ZW0+IGFjdGl2ZUl0ZW1zO1xuICAgIHByaXZhdGUgZmluYWwgUGx1Z2luIG1haW5DbGFzcztcbiAgICBwcml2YXRlIGZpbmFsIFBsYXllciBwbGF5ZXI7XG4gICAgcHJpdmF0ZSBmaW5hbCBpbnQgc2l6ZTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBDb21wb25lbnQgdGl0bGU7XG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeU9wZW5FdmVudD4gb3BlbkFjdGlvbjtcbiAgICBwcml2YXRlIEludmVudG9yeUV2ZW50TGlzdGVuZXIgbGlzdGVuZXI7XG4gICAgQEdldHRlclxuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlDbG9zZUV2ZW50PiBjbG9zZUFjdGlvbjtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBTdHJpbmdbXSBwYXR0ZXJuO1xuXG4gICAgcHVibGljIFJpb25JbnYoUGx1Z2luIG1haW5DbGFzcywgaW50IHNpemUsIENvbXBvbmVudCB0aXRsZSwgUGxheWVyIHBsYXllciwgU3RyaW5nW10gcGF0dGVybikge1xuICAgICAgICB0aGlzLm1haW5DbGFzcyA9IG1haW5DbGFzcztcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICAgICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybjtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICB0aGlzLmludmVudG9yeSA9IHRoaXMubWFpbkNsYXNzLmdldFNlcnZlcigpLmNyZWF0ZUludmVudG9yeShwbGF5ZXIsIHNpemUsIHRpdGxlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVyID09IG51bGwpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyID0gbmV3IEludmVudG9yeUV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyLnJlZ2lzdGVySW52ZW50b3J5KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tYWluQ2xhc3MuZ2V0U2VydmVyKCkuZ2V0UGx1Z2luTWFuYWdlcigpLnJlZ2lzdGVyRXZlbnRzKGxpc3RlbmVyLCBtYWluQ2xhc3MpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyLnJlZ2lzdGVySW52ZW50b3J5KHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBSaW9uSW52IGFkZEl0ZW0oQWN0aXZlSXRlbSBhY3RpdmVJdGVtKSB7XG4gICAgICAgIGludmVudG9yeS5hZGRJdGVtKGFjdGl2ZUl0ZW0uZ2V0SXRlbVN0YWNrKCkpO1xuICAgICAgICBhY3RpdmVJdGVtcy5hZGQoYWN0aXZlSXRlbSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBSaW9uSW52IG9uT3BlbihDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICB0aGlzLm9wZW5BY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBSaW9uSW52IG9uQ2xvc2UoQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY2xvc2VBY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuXG4gICAgcHVibGljIHZvaWQgcmVtb3ZlSXRlbShpbnQgc2xvdCkge1xuICAgICAgICBhY3RpdmVJdGVtcy5yZW1vdmVJZihpdGVtIC0+IGl0ZW0uZ2V0SXRlbVN0YWNrKCkuZXF1YWxzKGludmVudG9yeS5nZXRJdGVtKHNsb3QpKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgb3BlbihQbGF5ZXIgcGxheWVyKSB7XG4gICAgICAgIHBsYXllci5vcGVuSW52ZW50b3J5KGludmVudG9yeSk7XG4gICAgICAgIGlmIChvcGVuQWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIEludmVudG9yeU9wZW5FdmVudCBvcGVuRXZlbnQgPSBuZXcgSW52ZW50b3J5T3BlbkV2ZW50KHBsYXllci5nZXRPcGVuSW52ZW50b3J5KCkpO1xuICAgICAgICAgICAgb3BlbkFjdGlvbi5hY2NlcHQob3BlbkV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHNldEl0ZW0oaW50IHNsb3QsIEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSkge1xuICAgICAgICBpbnZlbnRvcnkuc2V0SXRlbShzbG90LCBhY3RpdmVJdGVtLmdldEl0ZW1TdGFjaygpKTtcbiAgICAgICAgYWN0aXZlSXRlbXMuYWRkKGFjdGl2ZUl0ZW0pO1xuICAgIH1cblxuXG4gICAgcHVibGljIHZvaWQgaGFuZGxlQ2xpY2soSW52ZW50b3J5Q2xpY2tFdmVudCBldmVudCkge1xuICAgICAgICBmb3IgKEFjdGl2ZUl0ZW0gYWN0aXZlSXRlbSA6IGFjdGl2ZUl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZ2V0Q3VycmVudEl0ZW0oKSAhPSBudWxsICYmIGV2ZW50LmdldEN1cnJlbnRJdGVtKCkuaXNTaW1pbGFyKGFjdGl2ZUl0ZW0uZ2V0SXRlbVN0YWNrKCkpICYmIGFjdGl2ZUl0ZW0uZ2V0QWN0aW9uKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUl0ZW0uZ2V0QWN0aW9uKCkuYWNjZXB0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNsb3NlKEludmVudG9yeUNsb3NlRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgaWYgKGNsb3NlQWN0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsb3NlQWN0aW9uLmFjY2VwdChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBzZXRVbkFjdGl2ZUl0ZW1zKEhhc2hNYXA8Q2hhcmFjdGVyLCBBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcykge1xuXG4gICAgICAgIGludCBzdGFydEluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKFN0cmluZyByb3cgOiBwYXR0ZXJuKSB7XG5cbiAgICAgICAgICAgIGlmIChzdGFydEluZGV4ID49IHNpemUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByb3cubGVuZ3RoKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGNoYXIgYyA9IHJvdy5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUl0ZW1zLmNvbnRhaW5zS2V5KGMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oc3RhcnRJbmRleCArIGksIGFjdGl2ZUl0ZW1zLmdldChjKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydEluZGV4ICs9IDk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhY3RpdmVJdGVtc1xuICAgICAqIEBhcGlOb3RlIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2V0IHRoZSBhY3RpdmUgaXRlbXMgaW4gdGhlIGludmVudG9yeVxuICAgICAqL1xuICAgIHB1YmxpYyB2b2lkIHNldEFjdGl2ZUl0ZW1zKEhhc2hNYXA8Q2hhcmFjdGVyLCBMaXN0PEFjdGl2ZUl0ZW0+PiBhY3RpdmVJdGVtcykge1xuICAgICAgICBpbnQgc3RhcnRJbmRleCA9IDA7XG5cbiAgICAgICAgZm9yIChTdHJpbmcgcm93IDogcGF0dGVybikge1xuXG4gICAgICAgICAgICBpZiAoc3RhcnRJbmRleCA+PSBzaXplKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcm93Lmxlbmd0aCgpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjaGFyIGMgPSByb3cuY2hhckF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVJdGVtcy5jb250YWluc0tleShjKSkge1xuICAgICAgICAgICAgICAgICAgICBMaXN0PEFjdGl2ZUl0ZW0+IGl0ZW1zID0gYWN0aXZlSXRlbXMuZ2V0KGMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKEFjdGl2ZUl0ZW0gaXRlbSA6IGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW52ZW50b3J5LmNvbnRhaW5zKGl0ZW0uZ2V0SXRlbVN0YWNrKCkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoSXRlbVN0YWNrIGl0ZW1TdGFjayA6IGludmVudG9yeS5nZXRDb250ZW50cygpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVN0YWNrICE9IG51bGwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEl0ZW0oc3RhcnRJbmRleCArIGksIGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdGFydEluZGV4ICs9IDk7XG4gICAgICAgIH1cbiAgICB9XG59Li4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9jb250cm9sbGVyL0ludmVudG9yeUV2ZW50TGlzdGVuZXIuamF2YVxucGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlcjtcblxuaW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5TdGV5T25JbnY7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5FdmVudEhhbmRsZXI7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5MaXN0ZW5lcjtcbmltcG9ydCBvcmcuYnVra2l0LmV2ZW50LmludmVudG9yeS5JbnZlbnRvcnlDbGlja0V2ZW50O1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuaW52ZW50b3J5LkludmVudG9yeUNsb3NlRXZlbnQ7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5pbnZlbnRvcnkuSW52ZW50b3J5T3BlbkV2ZW50O1xuXG5pbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5wdWJsaWMgY2xhc3MgSW52ZW50b3J5RXZlbnRMaXN0ZW5lciBpbXBsZW1lbnRzIExpc3RlbmVyIHtcblxuICAgIHByaXZhdGUgZmluYWwgTGlzdDxTdGV5T25JbnY+IHJlZ2lzdGVyZWRJbnZlbnRvcmllcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuXG4gICAgcHVibGljIHZvaWQgcmVnaXN0ZXJJbnZlbnRvcnkoU3RleU9uSW52IGludmVudG9yeSkge1xuICAgICAgICByZWdpc3RlcmVkSW52ZW50b3JpZXMuYWRkKGludmVudG9yeSk7XG4gICAgfVxuXG4gICAgQEV2ZW50SGFuZGxlclxuICAgIHB1YmxpYyB2b2lkIG9uSW52ZW50b3J5Q2xpY2soSW52ZW50b3J5Q2xpY2tFdmVudCBldmVudCkge1xuICAgICAgICBmb3IgKFN0ZXlPbkludiBpbnZlbnRvcnkgOiByZWdpc3RlcmVkSW52ZW50b3JpZXMpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5nZXRDbGlja2VkSW52ZW50b3J5KCkgIT0gbnVsbCAmJiBldmVudC5nZXRDbGlja2VkSW52ZW50b3J5KCkuZXF1YWxzKGludmVudG9yeS5nZXRJbnZlbnRvcnkoKSkpIHtcbiAgICAgICAgICAgICAgICBpbnZlbnRvcnkuaGFuZGxlQ2xpY2soZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgQEV2ZW50SGFuZGxlclxuICAgIHB1YmxpYyB2b2lkIG9uSW52ZW50b3J5T3BlbihJbnZlbnRvcnlPcGVuRXZlbnQgZXZlbnQpIHtcblxuICAgICAgICBmb3IgKFN0ZXlPbkludiBpbnZlbnRvcnkgOiByZWdpc3RlcmVkSW52ZW50b3JpZXMpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5nZXRJbnZlbnRvcnkoKS5lcXVhbHMoaW52ZW50b3J5LmdldEludmVudG9yeSgpKSkge1xuICAgICAgICAgICAgICAgIGlmIChpbnZlbnRvcnkub3BlbkFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmVudG9yeS5vcGVuQWN0aW9uLmFjY2VwdChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBFdmVudEhhbmRsZXJcbiAgICBwdWJsaWMgdm9pZCBvbkludmVudG9yeUNsb3NlKEludmVudG9yeUNsb3NlRXZlbnQgZXZlbnQpIHtcblxuICAgICAgICBmb3IgKFN0ZXlPbkludiBpbnZlbnRvcnkgOiByZWdpc3RlcmVkSW52ZW50b3JpZXMpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5nZXRJbnZlbnRvcnkoKS5lcXVhbHMoaW52ZW50b3J5LmdldEludmVudG9yeSgpKSkge1xuICAgICAgICAgICAgICAgIGlmIChpbnZlbnRvcnkuY2xvc2VBY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnZlbnRvcnkuY2xvc2VBY3Rpb24uYWNjZXB0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9pdGVtL0FjdGl2ZUl0ZW0uamF2YVxucGFja2FnZSBjaC5ha2NlbGVyYXQwci5hcGkuaW52Lml0ZW07XG5cbmltcG9ydCBsb21ib2suR2V0dGVyO1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuRXZlbnRIYW5kbGVyO1xuaW1wb3J0IG9yZy5idWtraXQuZXZlbnQuTGlzdGVuZXI7XG5pbXBvcnQgb3JnLmJ1a2tpdC5ldmVudC5pbnZlbnRvcnkuSW52ZW50b3J5Q2xpY2tFdmVudDtcbmltcG9ydCBvcmcuYnVra2l0LmludmVudG9yeS5JdGVtU3RhY2s7XG5cbmltcG9ydCBqYXZhLnV0aWwuZnVuY3Rpb24uQ29uc3VtZXI7XG5cbkBHZXR0ZXJcbnB1YmxpYyBjbGFzcyBBY3RpdmVJdGVtIHtcblxuICAgIHByaXZhdGUgZmluYWwgSXRlbVN0YWNrIGl0ZW1TdGFjaztcbiAgICBwcml2YXRlIENvbnN1bWVyPEludmVudG9yeUNsaWNrRXZlbnQ+IGFjdGlvbjtcblxuICAgIHB1YmxpYyBBY3RpdmVJdGVtKEl0ZW1TdGFjayBpdGVtU3RhY2spIHtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2sgPSBpdGVtU3RhY2s7XG4gICAgfVxuXG4gICAgcHVibGljIEFjdGl2ZUl0ZW0gY2xpY2soQ29uc3VtZXI8SW52ZW50b3J5Q2xpY2tFdmVudD4gYWN0aW9uKSB7XG4gICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbih0aGlzLmhhc2hDb2RlKCkgKyBcIiBcIiArIFwiYWN0aXZlSXRlbUhhc2hDb2RlSW5BY3RpdmVJdGVtQ2xhc3NcIiArIHRoaXMuaXRlbVN0YWNrLmdldFR5cGUoKS5uYW1lKCkpO1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgQEV2ZW50SGFuZGxlclxuICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNsaWNrKEludmVudG9yeUNsaWNrRXZlbnQgZXZlbnQpIHtcbiAgICAgICAgaWYgKGFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBhY3Rpb24uYWNjZXB0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiYTQyMzUwNC01NGIxLTQ1ZWEtYWZjZi1kMTlkZTNlY2Q4ZTI7dG9vbHVfdnJ0eF8wMVlWN3lNZWhjY2g5TXFNQmgyN3dNZlMiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhXG5wYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XG5cbmltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5qYXZhLkphdmFQbHVnaW47XG5cbnB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIG9uRW5hYmxlKCkge1xuICAgICAgICAvLyBQbHVnaW4gc3RhcnR1cCBsb2dpY1xuXG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgb25EaXNhYmxlKCkge1xuICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcbiAgICB9XG59XG4uLi5cblBhdGg6IHNyYy9tYWluL3Jlc291cmNlcy9wbHVnaW4ueW1sXG5uYW1lOiBEZXZTeXN0ZW1cbnZlcnNpb246ICcxLjAnXG5tYWluOiBkZS5zdGV5b24uZGV2U3lzdGVtLkRldlN5c3RlbVxuYXBpLXZlcnNpb246ICcxLjIxJ1xuYXV0aG9yczogWyBTdGV5T24gXVxuZGVzY3JpcHRpb246IE9mZmljaWFsIFN0ZXlPbiBEZXZlbG9wZXIgU3lzdGVtIGZvciBNaW5lY3JhZnQgU2VydmVyc1xud2Vic2l0ZTogaHR0cHM6Ly9naXRodWIuY29tL1N0ZXlPblxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9TdGV5T25JbnYuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBTdGV5T25JbnYge1xuXG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgSW52ZW50b3J5IGludmVudG9yeTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBBcnJheUxpc3Q8QWN0aXZlSXRlbT4gYWN0aXZlSXRlbXM7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbHVnaW4gbWFpbkNsYXNzO1xuICAgIHByaXZhdGUgZmluYWwgUGxheWVyIHBsYXllcjtcbiAgICBwcml2YXRlIGZpbmFsIGludCBzaXplO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIENvbXBvbmVudCB0aXRsZTtcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBvcGVuQWN0aW9uO1xuICAgIHByaXZhdGUgSW52ZW50b3J5RXZlbnRMaXN0ZW5lciBsaXN0ZW5lcjtcbiAgICBAR2V0dGVyXG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGNsb3NlQWN0aW9uO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIFN0cmluZ1tdIHBhdHRlcm47XG5cbiAgICBwdWJsaWMgUmlvbkludihQbHVnaW4gbWFpbkNsYXNzLCBpbnQgc2l6ZSwgQ29tcG9uZW50IHRpdGxlLCBQbGF5ZXIgcGxheWVyLCBTdHJpbmdbXSBwYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMubWFpbkNsYXNzID0gbWFpbkNsYXNzO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHRoaXMuaW52ZW50b3J5ID0gdGhpcy5tYWluQ2xhc3MuZ2V0U2VydmVyKCkuY3JlYXRlSW52ZW50b3J5KHBsYXllciwgc2l6ZSwgdGl0bGUpO1xuICAgICAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSBuZXcgSW52ZW50b3J5RXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgbGlzdGVuZXIucmVnaXN0ZXJJbnZlbnRvcnkodGhpcyk7XG4gICAgICAgICAgICB0aGlzLm1haW5DbGFzcy5nZXRTZXJ2ZXIoKS5nZXRQbHVnaW5NYW5hZ2VyKCkucmVnaXN0ZXJFdmVudHMobGlzdGVuZXIsIG1haW5DbGFzcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXIucmVnaXN0ZXJJbnZlbnRvcnkodGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIFJpb25JbnYgYWRkSXRlbShBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgaW52ZW50b3J5LmFkZEl0ZW0oYWN0aXZlSXRlbS5nZXRJdGVtU3RhY2soKSk7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLmFkZChhY3RpdmVJdGVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIFJpb25JbnYgb25PcGVuKENvbnN1bWVyPEludmVudG9yeU9wZW5FdmVudD4gYWN0aW9uKSB7XG4gICAgICAgIHRoaXMub3BlbkFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIFJpb25JbnYgb25DbG9zZShDb25zdW1lcjxJbnZlbnRvcnlDbG9zZUV2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jbG9zZUFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgdm9pZCByZW1vdmVJdGVtKGludCBzbG90KSB7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLnJlbW92ZUlmKGl0ZW0gLT4gaXRlbS5nZXRJdGVtU3RhY2soKS5lcXVhbHMoaW52ZW50b3J5LmdldEl0ZW0oc2xvdCkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBvcGVuKFBsYXllciBwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLm9wZW5JbnZlbnRvcnkoaW52ZW50b3J5KTtcbiAgICAgICAgaWYgKG9wZW5BY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgSW52ZW50b3J5T3BlbkV2ZW50IG9wZW5FdmVudCA9IG5ldyBJbnZlbnRvcnlPcGVuRXZlbnQocGxheWVyLmdldE9wZW5JbnZlbnRvcnkoKSk7XG4gICAgICAgICAgICBvcGVuQWN0aW9uLmFjY2VwdChvcGVuRXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SXRlbShpbnQgc2xvdCwgQWN0aXZlSXRlbSBhY3RpdmVJdGVtKSB7XG4gICAgICAgIGludmVudG9yeS5zZXRJdGVtKHNsb3QsIGFjdGl2ZUl0ZW0uZ2V0SXRlbVN0YWNrKCkpO1xuICAgICAgICBhY3RpdmVJdGVtcy5hZGQoYWN0aXZlSXRlbSk7XG4gICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYWN0aXZlSXRlbXNcbiAgICAgKiBAYXBpTm90ZSBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNldCB0aGUgYWN0aXZlIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnlcbiAgICAgKi9cbiAgICBwdWJsaWMgdm9pZCBzZXRBY3RpdmVJdGVtcyhIYXNoTWFwPENoYXJhY3RlciwgTGlzdDxBY3RpdmVJdGVtPj4gYWN0aXZlSXRlbXMpIHtcbiAgICAgICAgaW50IHN0YXJ0SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAoU3RyaW5nIHJvdyA6IHBhdHRlcm4pIHtcblxuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPj0gc2l6ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHJvdy5sZW5ndGgoKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2hhciBjID0gcm93LmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbXMuY29udGFpbnNLZXkoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxBY3RpdmVJdGVtPiBpdGVtcyA9IGFjdGl2ZUl0ZW1zLmdldChjKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChBY3RpdmVJdGVtIGl0ZW0gOiBpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludmVudG9yeS5jb250YWlucyhpdGVtLmdldEl0ZW1TdGFjaygpKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKEl0ZW1TdGFjayBpdGVtU3RhY2sgOiBpbnZlbnRvcnkuZ2V0Q29udGVudHMoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1TdGFjayAhPSBudWxsKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtKHN0YXJ0SW5kZXggKyBpLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnRJbmRleCArPSA5O1xuICAgICAgICB9XG4gICAgfVxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvUmlvbkludi5qYXZhXG4uLi5cblxucHVibGljIGNsYXNzIFJpb25JbnYge1xuXG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgSW52ZW50b3J5IGludmVudG9yeTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBBcnJheUxpc3Q8QWN0aXZlSXRlbT4gYWN0aXZlSXRlbXM7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbHVnaW4gbWFpbkNsYXNzO1xuICAgIHByaXZhdGUgZmluYWwgUGxheWVyIHBsYXllcjtcbiAgICBwcml2YXRlIGZpbmFsIGludCBzaXplO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIENvbXBvbmVudCB0aXRsZTtcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBvcGVuQWN0aW9uO1xuICAgIHByaXZhdGUgSW52ZW50b3J5RXZlbnRMaXN0ZW5lciBsaXN0ZW5lcjtcbiAgICBAR2V0dGVyXG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGNsb3NlQWN0aW9uO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIFN0cmluZ1tdIHBhdHRlcm47XG5cbiAgICBwdWJsaWMgUmlvbkludihQbHVnaW4gbWFpbkNsYXNzLCBpbnQgc2l6ZSwgQ29tcG9uZW50IHRpdGxlLCBQbGF5ZXIgcGxheWVyLCBTdHJpbmdbXSBwYXR0ZXJuKSB7XG4gICAgICAgIHRoaXMubWFpbkNsYXNzID0gbWFpbkNsYXNzO1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHRoaXMuaW52ZW50b3J5ID0gdGhpcy5tYWluQ2xhc3MuZ2V0U2VydmVyKCkuY3JlYXRlSW52ZW50b3J5KHBsYXllciwgc2l6ZSwgdGl0bGUpO1xuICAgICAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSBuZXcgSW52ZW50b3J5RXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgbGlzdGVuZXIucmVnaXN0ZXJJbnZlbnRvcnkodGhpcyk7XG4gICAgICAgICAgICB0aGlzLm1haW5DbGFzcy5nZXRTZXJ2ZXIoKS5nZXRQbHVnaW5NYW5hZ2VyKCkucmVnaXN0ZXJFdmVudHMobGlzdGVuZXIsIG1haW5DbGFzcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXIucmVnaXN0ZXJJbnZlbnRvcnkodGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIFJpb25JbnYgYWRkSXRlbShBY3RpdmVJdGVtIGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgaW52ZW50b3J5LmFkZEl0ZW0oYWN0aXZlSXRlbS5nZXRJdGVtU3RhY2soKSk7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLmFkZChhY3RpdmVJdGVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIFJpb25JbnYgb25PcGVuKENvbnN1bWVyPEludmVudG9yeU9wZW5FdmVudD4gYWN0aW9uKSB7XG4gICAgICAgIHRoaXMub3BlbkFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIFJpb25JbnYgb25DbG9zZShDb25zdW1lcjxJbnZlbnRvcnlDbG9zZUV2ZW50PiBhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jbG9zZUFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgdm9pZCByZW1vdmVJdGVtKGludCBzbG90KSB7XG4gICAgICAgIGFjdGl2ZUl0ZW1zLnJlbW92ZUlmKGl0ZW0gLT4gaXRlbS5nZXRJdGVtU3RhY2soKS5lcXVhbHMoaW52ZW50b3J5LmdldEl0ZW0oc2xvdCkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBvcGVuKFBsYXllciBwbGF5ZXIpIHtcbiAgICAgICAgcGxheWVyLm9wZW5JbnZlbnRvcnkoaW52ZW50b3J5KTtcbiAgICAgICAgaWYgKG9wZW5BY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgSW52ZW50b3J5T3BlbkV2ZW50IG9wZW5FdmVudCA9IG5ldyBJbnZlbnRvcnlPcGVuRXZlbnQocGxheWVyLmdldE9wZW5JbnZlbnRvcnkoKSk7XG4gICAgICAgICAgICBvcGVuQWN0aW9uLmFjY2VwdChvcGVuRXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgc2V0SXRlbShpbnQgc2xvdCwgQWN0aXZlSXRlbSBhY3RpdmVJdGVtKSB7XG4gICAgICAgIGludmVudG9yeS5zZXRJdGVtKHNsb3QsIGFjdGl2ZUl0ZW0uZ2V0SXRlbVN0YWNrKCkpO1xuICAgICAgICBhY3RpdmVJdGVtcy5hZGQoYWN0aXZlSXRlbSk7XG4gICAgfVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYWN0aXZlSXRlbXNcbiAgICAgKiBAYXBpTm90ZSBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNldCB0aGUgYWN0aXZlIGl0ZW1zIGluIHRoZSBpbnZlbnRvcnlcbiAgICAgKi9cbiAgICBwdWJsaWMgdm9pZCBzZXRBY3RpdmVJdGVtcyhIYXNoTWFwPENoYXJhY3RlciwgTGlzdDxBY3RpdmVJdGVtPj4gYWN0aXZlSXRlbXMpIHtcbiAgICAgICAgaW50IHN0YXJ0SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAoU3RyaW5nIHJvdyA6IHBhdHRlcm4pIHtcblxuICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPj0gc2l6ZSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHJvdy5sZW5ndGgoKTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2hhciBjID0gcm93LmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSXRlbXMuY29udGFpbnNLZXkoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgTGlzdDxBY3RpdmVJdGVtPiBpdGVtcyA9IGFjdGl2ZUl0ZW1zLmdldChjKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChBY3RpdmVJdGVtIGl0ZW0gOiBpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludmVudG9yeS5jb250YWlucyhpdGVtLmdldEl0ZW1TdGFjaygpKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKEl0ZW1TdGFjayBpdGVtU3RhY2sgOiBpbnZlbnRvcnkuZ2V0Q29udGVudHMoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1TdGFjayAhPSBudWxsKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJdGVtKHN0YXJ0SW5kZXggKyBpLCBpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RhcnRJbmRleCArPSA5O1xuICAgICAgICB9XG4gICAgfVxufS4uLlxuUGF0aDogYnVpbGQuZ3JhZGxlXG4uLi5cblxuZGVmIHRhcmdldEphdmFWZXJzaW9uID0gMjFcbmphdmEge1xuICAgIGRlZiBqYXZhVmVyc2lvbiA9IEphdmFWZXJzaW9uLnRvVmVyc2lvbih0YXJnZXRKYXZhVmVyc2lvbilcbiAgICBzb3VyY2VDb21wYXRpYmlsaXR5ID0gamF2YVZlcnNpb25cbiAgICB0YXJnZXRDb21wYXRpYmlsaXR5ID0gamF2YVZlcnNpb25cbiAgICBpZiAoSmF2YVZlcnNpb24uY3VycmVudCgpIDwgamF2YVZlcnNpb24pIHtcbiAgICAgICAgdG9vbGNoYWluLmxhbmd1YWdlVmVyc2lvbiA9IEphdmFMYW5ndWFnZVZlcnNpb24ub2YodGFyZ2V0SmF2YVZlcnNpb24pXG4gICAgfVxufVxuXG50YXNrcy53aXRoVHlwZShKYXZhQ29tcGlsZSkuY29uZmlndXJlRWFjaCB7XG4gICAgb3B0aW9ucy5lbmNvZGluZyA9ICdVVEYtOCdcblxuICAgIGlmICh0YXJnZXRKYXZhVmVyc2lvbiA+PSAxMCB8fCBKYXZhVmVyc2lvbi5jdXJyZW50KCkuaXNKYXZhMTBDb21wYXRpYmxlKCkpIHtcbiAgICAgICAgb3B0aW9ucy5yZWxlYXNlLnNldCh0YXJnZXRKYXZhVmVyc2lvbilcbiAgICB9XG59XG5cbnByb2Nlc3NSZXNvdXJjZXMge1xuICAgIGRlZiBwcm9wcyA9IFt2ZXJzaW9uOiB2ZXJzaW9uXVxuICAgIGlucHV0cy5wcm9wZXJ0aWVzIHByb3BzXG4gICAgZmlsdGVyaW5nQ2hhcnNldCAnVVRGLTgnXG4gICAgZmlsZXNNYXRjaGluZygncGx1Z2luLnltbCcpIHtcbiAgICAgICAgZXhwYW5kIHByb3BzXG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9jb250cm9sbGVyL0ludmVudG9yeU1hbmFnZXIuamF2YVxucGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlcjtcblxuaW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5TdGV5T25JbnY7XG5pbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LlN0ZXlPbkludjtcbmltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5QbHVnaW47XG5cbmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbmltcG9ydCBqYXZhLnV0aWwuVVVJRDtcblxucHVibGljIGNsYXNzIEludmVudG9yeU1hbmFnZXIge1xuXG4gICAgcHJpdmF0ZSBmaW5hbCBQbHVnaW4gbWFpbkNsYXNzO1xuICAgIHByaXZhdGUgZmluYWwgSGFzaE1hcDxVVUlELCBTdGV5T25JbnY+IGNhY2hlO1xuXG4gICAgcHVibGljIEludmVudG9yeU1hbmFnZXIoUGx1Z2luIG1haW5DbGFzcywgSGFzaE1hcDxVVUlELCBTdGV5T25JbnY+IGNhY2hlKSB7XG4gICAgICAgIHRoaXMubWFpbkNsYXNzID0gbWFpbkNsYXNzO1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgb3BlbihVVUlEIHV1aWQsIFN0ZXlPbkludiBTdGV5T25JbnYpIHtcbiAgICAgICAgdGhpcy5jYWNoZS5wdXQodXVpZCwgU3RleU9uSW52KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdm9pZCBhZGQoVVVJRCB1dWlkLCBTdGV5T25JbnYgU3RleU9uSW52KSB7XG4gICAgICAgIGNhY2hlLnB1dCh1dWlkLCBTdGV5T25JbnYpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZShVVUlEIHV1aWQpIHtcbiAgICAgICAgY2FjaGUucmVtb3ZlKHV1aWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkge1xuICAgICAgICBjYWNoZS5jbGVhcigpO1xuICAgIH1cblxufS4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pdGVtL0l0ZW1CdWlsZGVyLmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgSXRlbUJ1aWxkZXIge1xuXG4gICAgcHJpdmF0ZSBmaW5hbCBJdGVtU3RhY2sgaXRlbVN0YWNrO1xuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyKEl0ZW1TdGFjayBpdGVtU3RhY2spIHtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2sgPSBpdGVtU3RhY2s7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyKE1hdGVyaWFsIG1hdGVyaWFsKSB7XG4gICAgICAgIHRoaXMuaXRlbVN0YWNrID0gbmV3IEl0ZW1TdGFjayhtYXRlcmlhbCk7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyIG5hbWUoU3RyaW5nIG5hbWUpIHtcbiAgICAgICAgbmFtZShMZWdhY3lDb21wb25lbnRTZXJpYWxpemVyLmxlZ2FjeVNlY3Rpb24oKS5kZXNlcmlhbGl6ZShuYW1lKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBJdGVtQnVpbGRlciBuYW1lKENvbXBvbmVudCBuYW1lKSB7XG4gICAgICAgIHRoaXMuaXRlbVN0YWNrLmVkaXRNZXRhKGl0ZW1NZXRhIC0+IGl0ZW1NZXRhLmRpc3BsYXlOYW1lKG5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyIHNldEN1c3RvbU1vZGVsRGF0YShpbnQgY3VzdG9tTW9kZWxEYXRhKSB7XG4gICAgICAgIEl0ZW1NZXRhIGl0ZW1NZXRhID0gdGhpcy5pdGVtU3RhY2suZ2V0SXRlbU1ldGEoKTtcbiAgICAgICAgaXRlbU1ldGEuc2V0Q3VzdG9tTW9kZWxEYXRhKGN1c3RvbU1vZGVsRGF0YSk7XG4gICAgICAgIHRoaXMuaXRlbVN0YWNrLnNldEl0ZW1NZXRhKGl0ZW1NZXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1TdGFjayBidWlsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbVN0YWNrO1xuICAgIH1cbi4uLlxuUGF0aDogc2V0dGluZ3MuZ3JhZGxlXG5yb290UHJvamVjdC5uYW1lID0gJ0RldlN5c3RlbSdcbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYWJmNmU0NGMtMGEwYS00NTRkLThhNTctMjMyMDMwNzRhZTAyO3Rvb2x1X3ZydHhfMDFTVDlkOUYxNUJuWk1nbVEzbng3aU5KIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXIuSW52ZW50b3J5TWFuYWdlcjtcbiAgICAgNFx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNVx0XG4gICAgIDZcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAgOVx0XG4gICAgMTBcdFxuICAgIDExXHRcbiAgICAxMlx0ICAgIEBPdmVycmlkZVxuICAgIDEzXHQgICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG4gICAgMTRcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxNVx0XG4gICAgMTZcdCAgICB9XG4gICAgMTdcdFxuICAgIDE4XHQgICAgQE92ZXJyaWRlXG4gICAgMTlcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjBcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjFcdCAgICB9XG4gICAgMjJcdH1cbiAgICAyM1x0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyM1xuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiODZlOWQ4M2QtYjQ3NS00MWY5LWEwODktNDk1MGJiYzQzNWE5O3Rvb2x1X3ZydHhfMDFKNlAydThGMllha0pGdVJ2NUIxREYxIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDRcdGltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5qYXZhLkphdmFQbHVnaW47XG4gICAgIDVcdFxuICAgICA2XHRpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG4gICAgIDdcdFxuICAgICA4XHRwdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XG4gICAgIDlcdFxuICAgIDEwXHQgICAgcHJpdmF0ZSBJbnZlbnRvcnlNYW5hZ2VyIGludmVudG9yeU1hbmFnZXI7XG4gICAgMTFcdFxuICAgIDEyXHRcbiAgICAxM1x0ICAgIEBPdmVycmlkZVxuICAgIDE0XHQgICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG4gICAgMTVcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxNlx0XG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1sxXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE1XHQgICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlciA9IG5ldyBJbnZlbnRvcnlNYW5hZ2VyKHRoaXMsIG5ldyBIYXNoTWFwPD4oKSk7XG4gICAgMTZcdFxuICAgIDE3XHQgICAgfVxuICAgIDE4XHRcbiAgICAxOVx0ICAgIEBPdmVycmlkZVxuICAgIDIwXHQgICAgcHVibGljIHZvaWQgb25EaXNhYmxlKCkge1xuICAgIDIxXHQgICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgIDIyXHQgICAgfVxuICAgIDIzXHRcbiAgICAyNFx0ICAgIC8qKlxuICAgIDI1XHQgICAgICogR2V0IHRoZSBpbnZlbnRvcnkgbWFuYWdlciBpbnN0YW5jZVxuICAgIDI2XHQgICAgICogQHJldHVybiBUaGUgaW52ZW50b3J5IG1hbmFnZXJcbiAgICAyN1x0ICAgICAqL1xuICAgIDI4XHQgICAgcHVibGljIEludmVudG9yeU1hbmFnZXIgZ2V0SW52ZW50b3J5TWFuYWdlcigpIHtcbiAgICAyOVx0ICAgICAgICByZXR1cm4gaW52ZW50b3J5TWFuYWdlcjtcbiAgICAzMFx0ICAgIH1cbiAgICAzMVx0fVxuICAgIDMyXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYzAzNmRjODMtNmFmZi00ZDcwLTk4YjUtZmI2ZDA0ZDAzZDBjO3Rvb2x1X3ZydHhfMDE3N3M5TVRNMkNiczExTEhnYmprQmZMIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXIuSW52ZW50b3J5TWFuYWdlcjtcbiAgICAgNFx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNVx0XG4gICAgIDZcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAgOVx0XG4gICAgMTBcdCAgICBwcml2YXRlIEludmVudG9yeU1hbmFnZXIgaW52ZW50b3J5TWFuYWdlcjtcbiAgICAxMVx0XG4gICAgMTJcdFxuICAgIDEzXHQgICAgQE92ZXJyaWRlXG4gICAgMTRcdCAgICBwdWJsaWMgdm9pZCBvbkVuYWJsZSgpIHtcbiAgICAxNVx0ICAgICAgICB0aGlzLmludmVudG9yeU1hbmFnZXIgPSBuZXcgSW52ZW50b3J5TWFuYWdlcih0aGlzLCBuZXcgSGFzaE1hcDw+KCkpO1xuICAgIDE2XHRcbiAgICAxN1x0ICAgIH1cbiAgICAxOFx0XG4gICAgMTlcdCAgICBAT3ZlcnJpZGVcbiAgICAyMFx0ICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcbiAgICAyMVx0ICAgICAgICAvLyBQbHVnaW4gc2h1dGRvd24gbG9naWNcbiAgICAyMlx0ICAgIH1cbiAgICAyM1x0XG4gICAgMjRcdCAgICAvKipcbiAgICAyNVx0ICAgICAqIEdldCB0aGUgaW52ZW50b3J5IG1hbmFnZXIgaW5zdGFuY2VcbiAgICAyNlx0ICAgICAqIEByZXR1cm4gVGhlIGludmVudG9yeSBtYW5hZ2VyXG4gICAgMjdcdCAgICAgKi9cbiAgICAyOFx0ICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyIGdldEludmVudG9yeU1hbmFnZXIoKSB7XG4gICAgMjlcdCAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgMzBcdCAgICB9XG4gICAgMzFcdH1cbiAgICAzMlx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYTYwOGYwNjktNmZlOC00M2RkLTgxYmQtNTVkYzE0ODQ1MDg3O3Rvb2x1X3ZydHhfMDE5Q0NIRGJnQWZIOFBKQW16R0FiUmpLIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IGJ1aWxkLmdyYWRsZVxucGx1Z2lucyB7XG4gICAgaWQgJ2phdmEnXG4gICAgaWQoXCJ4eXouanBlbmlsbGEucnVuLXBhcGVyXCIpIHZlcnNpb24gXCIyLjMuMVwiXG59XG5cbmdyb3VwID0gJ2RlLnN0ZXlvbidcbnZlcnNpb24gPSAnMS4wJ1xuXG5yZXBvc2l0b3JpZXMge1xuICAgIG1hdmVuQ2VudHJhbCgpXG4gICAgbWF2ZW4ge1xuICAgICAgICBuYW1lID0gXCJwYXBlcm1jLXJlcG9cIlxuICAgICAgICB1cmwgPSBcImh0dHBzOi8vcmVwby5wYXBlcm1jLmlvL3JlcG9zaXRvcnkvbWF2ZW4tcHVibGljL1wiXG4gICAgfVxuICAgIG1hdmVuIHtcbiAgICAgICAgbmFtZSA9IFwic29uYXR5cGVcIlxuICAgICAgICB1cmwgPSBcImh0dHBzOi8vb3NzLnNvbmF0eXBlLm9yZy9jb250ZW50L2dyb3Vwcy9wdWJsaWMvXCJcbiAgICB9XG59XG5cbmRlcGVuZGVuY2llcyB7XG4gICAgY29tcGlsZU9ubHkoXCJpby5wYXBlcm1jLnBhcGVyOnBhcGVyLWFwaToxLjIxLjQtUjAuMS1TTkFQU0hPVFwiKVxuICAgIGNvbXBpbGVPbmx5KFwib3JnLnByb2plY3Rsb21ib2s6bG9tYm9rOjEuMTguMzhcIilcbiAgICBhbm5vdGF0aW9uUHJvY2Vzc29yKFwib3JnLnByb2plY3Rsb21ib2s6bG9tYm9rOjEuMTguMzhcIilcbn1cblxudGFza3Mge1xuICAgIHJ1blNlcnZlciB7XG4gICAgICAgIC8vIENvbmZpZ3VyZSB0aGUgTWluZWNyYWZ0IHZlcnNpb24gZm9yIG91ciB0YXNrLlxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24gYmVzaWRlcyBhcHBseWluZyB0aGUgcGx1Z2luLlxuICAgICAgICAvLyBZb3VyIHBsdWdpbidzIGphciAob3Igc2hhZG93SmFyIGlmIHByZXNlbnQpIHdpbGwgYmUgdXNlZCBhdXRvbWF0aWNhbGx5LlxuICAgICAgICBtaW5lY3JhZnRWZXJzaW9uKFwiMS4yMVwiKVxuICAgIH1cbn1cblxuZGVmIHRhcmdldEphdmFWZXJzaW9uID0gMjFcbmphdmEge1xuICAgIGRlZiBqYXZhVmVyc2lvbiA9IEphdmFWZXJzaW9uLnRvVmVyc2lvbih0YXJnZXRKYXZhVmVyc2lvbilcbiAgICBzb3VyY2VDb21wYXRpYmlsaXR5ID0gamF2YVZlcnNpb25cbiAgICB0YXJnZXRDb21wYXRpYmlsaXR5ID0gamF2YVZlcnNpb25cbiAgICBpZiAoSmF2YVZlcnNpb24uY3VycmVudCgpIDwgamF2YVZlcnNpb24pIHtcbiAgICAgICAgdG9vbGNoYWluLmxhbmd1YWdlVmVyc2lvbiA9IEphdmFMYW5ndWFnZVZlcnNpb24ub2YodGFyZ2V0SmF2YVZlcnNpb24pXG4gICAgfVxufVxuXG50YXNrcy53aXRoVHlwZShKYXZhQ29tcGlsZSkuY29uZmlndXJlRWFjaCB7XG4gICAgb3B0aW9ucy5lbmNvZGluZyA9ICdVVEYtOCdcblxuICAgIGlmICh0YXJnZXRKYXZhVmVyc2lvbiA+PSAxMCB8fCBKYXZhVmVyc2lvbi5jdXJyZW50KCkuaXNKYXZhMTBDb21wYXRpYmxlKCkpIHtcbiAgICAgICAgb3B0aW9ucy5yZWxlYXNlLnNldCh0YXJnZXRKYXZhVmVyc2lvbilcbiAgICB9XG59XG5cbnByb2Nlc3NSZXNvdXJjZXMge1xuICAgIGRlZiBwcm9wcyA9IFt2ZXJzaW9uOiB2ZXJzaW9uXVxuICAgIGlucHV0cy5wcm9wZXJ0aWVzIHByb3BzXG4gICAgZmlsdGVyaW5nQ2hhcnNldCAnVVRGLTgnXG4gICAgZmlsZXNNYXRjaGluZygncGx1Z2luLnltbCcpIHtcbiAgICAgICAgZXhwYW5kIHByb3BzXG4gICAgfVxufVxuLi4uXG5QYXRoOiAuZ3JhZGxlL2J1aWxkT3V0cHV0Q2xlYW51cC9jYWNoZS5wcm9wZXJ0aWVzXG4jU2F0IEFwciAwNSAwMDozNjoyNiBDRVNUIDIwMjVcbmdyYWRsZS52ZXJzaW9uPTguOFxuLi4uXG5QYXRoOiBzZXR0aW5ncy5ncmFkbGVcbnJvb3RQcm9qZWN0Lm5hbWUgPSAnRGV2U3lzdGVtJ1xuLi4uXG5QYXRoOiBncmFkbGUvd3JhcHBlci9ncmFkbGUtd3JhcHBlci5wcm9wZXJ0aWVzXG5kaXN0cmlidXRpb25CYXNlPUdSQURMRV9VU0VSX0hPTUVcbmRpc3RyaWJ1dGlvblBhdGg9d3JhcHBlci9kaXN0c1xuZGlzdHJpYnV0aW9uVXJsPWh0dHBzXFw6Ly9zZXJ2aWNlcy5ncmFkbGUub3JnL2Rpc3RyaWJ1dGlvbnMvZ3JhZGxlLTguOC1iaW4uemlwXG5uZXR3b3JrVGltZW91dD0xMDAwMFxudmFsaWRhdGVEaXN0cmlidXRpb25Vcmw9dHJ1ZVxuemlwU3RvcmVCYXNlPUdSQURMRV9VU0VSX0hPTUVcbnppcFN0b3JlUGF0aD13cmFwcGVyL2Rpc3RzXG4uLi5cblBhdGg6IGdyYWRsZXcuYmF0XG5AcmVtXG5AcmVtIENvcHlyaWdodCAyMDE1IHRoZSBvcmlnaW5hbCBhdXRob3Igb3IgYXV0aG9ycy5cbkByZW1cbkByZW0gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbkByZW0geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuQHJlbSBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbkByZW1cbkByZW0gICAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5AcmVtXG5AcmVtIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbkByZW0gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuQHJlbSBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbkByZW0gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuQHJlbSBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbkByZW1cblxuQGlmIFwiJURFQlVHJVwiPT1cIlwiIEBlY2hvIG9mZlxuQHJlbSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuQHJlbVxuQHJlbSAgR3JhZGxlIHN0YXJ0dXAgc2NyaXB0IGZvciBXaW5kb3dzXG5AcmVtXG5AcmVtICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG5cbkByZW0gU2V0IGxvY2FsIHNjb3BlIGZvciB0aGUgdmFyaWFibGVzIHdpdGggd2luZG93cyBOVCBzaGVsbFxuaWYgXCIlT1MlXCI9PVwiV2luZG93c19OVFwiIHNldGxvY2FsXG5cbnNldCBESVJOQU1FPSV+ZHAwXG5pZiBcIiVESVJOQU1FJVwiPT1cIlwiIHNldCBESVJOQU1FPS5cbkByZW0gVGhpcyBpcyBub3JtYWxseSB1bnVzZWRcbnNldCBBUFBfQkFTRV9OQU1FPSV+bjBcbnNldCBBUFBfSE9NRT0lRElSTkFNRSVcblxuQHJlbSBSZXNvbHZlIGFueSBcIi5cIiBhbmQgXCIuLlwiIGluIEFQUF9IT01FIHRvIG1ha2UgaXQgc2hvcnRlci5cbmZvciAlJWkgaW4gKFwiJUFQUF9IT01FJVwiKSBkbyBzZXQgQVBQX0hPTUU9JSV+ZmlcblxuQHJlbSBBZGQgZGVmYXVsdCBKVk0gb3B0aW9ucyBoZXJlLiBZb3UgY2FuIGFsc28gdXNlIEpBVkFfT1BUUyBhbmQgR1JBRExFX09QVFMgdG8gcGFzcyBKVk0gb3B0aW9ucyB0byB0aGlzIHNjcmlwdC5cbnNldCBERUZBVUxUX0pWTV9PUFRTPVwiLVhteDY0bVwiIFwiLVhtczY0bVwiXG4uLi5cblxuOmV4ZWN1dGVcbkByZW0gU2V0dXAgdGhlIGNvbW1hbmQgbGluZVxuXG5zZXQgQ0xBU1NQQVRIPSVBUFBfSE9NRSVcXGdyYWRsZVxcd3JhcHBlclxcZ3JhZGxlLXdyYXBwZXIuamFyXG5cblxuQHJlbSBFeGVjdXRlIEdyYWRsZVxuXCIlSkFWQV9FWEUlXCIgJURFRkFVTFRfSlZNX09QVFMlICVKQVZBX09QVFMlICVHUkFETEVfT1BUUyUgXCItRG9yZy5ncmFkbGUuYXBwbmFtZT0lQVBQX0JBU0VfTkFNRSVcIiAtY2xhc3NwYXRoIFwiJUNMQVNTUEFUSCVcIiBvcmcuZ3JhZGxlLndyYXBwZXIuR3JhZGxlV3JhcHBlck1haW4gJSpcblxuOmVuZFxuQHJlbSBFbmQgbG9jYWwgc2NvcGUgZm9yIHRoZSB2YXJpYWJsZXMgd2l0aCB3aW5kb3dzIE5UIHNoZWxsXG5pZiAlRVJST1JMRVZFTCUgZXF1IDAgZ290byBtYWluRW5kXG5cbjpmYWlsXG5yZW0gU2V0IHZhcmlhYmxlIEdSQURMRV9FWElUX0NPTlNPTEUgaWYgeW91IG5lZWQgdGhlIF9zY3JpcHRfIHJldHVybiBjb2RlIGluc3RlYWQgb2ZcbnJlbSB0aGUgX2NtZC5leGUgL2NfIHJldHVybiBjb2RlIVxuc2V0IEVYSVRfQ09ERT0lRVJST1JMRVZFTCVcbmlmICVFWElUX0NPREUlIGVxdSAwIHNldCBFWElUX0NPREU9MVxuaWYgbm90IFwiXCI9PVwiJUdSQURMRV9FWElUX0NPTlNPTEUlXCIgZXhpdCAlRVhJVF9DT0RFJVxuZXhpdCAvYiAlRVhJVF9DT0RFJVxuXG46bWFpbkVuZFxuaWYgXCIlT1MlXCI9PVwiV2luZG93c19OVFwiIGVuZGxvY2FsXG5cbjpvbWVnYVxuLi4uXG5QYXRoOiBncmFkbGV3XG4jIS9iaW4vc2hcblxuI1xuIyBDb3B5cmlnaHQgwqkgMjAxNS0yMDIxIHRoZSBvcmlnaW5hbCBhdXRob3JzLlxuI1xuIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4jIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuI1xuIyAgICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiNcbiMgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4jIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4jIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuI1xuLi4uXG4jICAgICAgIGFuZCBHUkFETEVfT1BUUykgcmVseSBvbiB3b3JkLXNwbGl0dGluZywgdGhpcyBpcyBwZXJmb3JtZWQgZXhwbGljaXRseTtcbiMgICAgICAgc2VlIHRoZSBpbi1saW5lIGNvbW1lbnRzIGZvciBkZXRhaWxzLlxuI1xuIyAgICAgICBUaGVyZSBhcmUgdHdlYWtzIGZvciBzcGVjaWZpYyBvcGVyYXRpbmcgc3lzdGVtcyBzdWNoIGFzIEFJWCwgQ3lnV2luLFxuIyAgICAgICBEYXJ3aW4sIE1pbkdXLCBhbmQgTm9uU3RvcC5cbiNcbiMgICAoMykgVGhpcyBzY3JpcHQgaXMgZ2VuZXJhdGVkIGZyb20gdGhlIEdyb292eSB0ZW1wbGF0ZVxuIyAgICAgICBodHRwczovL2dpdGh1Yi5jb20vZ3JhZGxlL2dyYWRsZS9ibG9iL0hFQUQvcGxhdGZvcm1zL2p2bS9wbHVnaW5zLWFwcGxpY2F0aW9uL3NyYy9tYWluL3Jlc291cmNlcy9vcmcvZ3JhZGxlL2FwaS9pbnRlcm5hbC9wbHVnaW5zL3VuaXhTdGFydFNjcmlwdC50eHRcbiMgICAgICAgd2l0aGluIHRoZSBHcmFkbGUgcHJvamVjdC5cbiNcbiMgICAgICAgWW91IGNhbiBmaW5kIEdyYWRsZSBhdCBodHRwczovL2dpdGh1Yi5jb20vZ3JhZGxlL2dyYWRsZS8uXG4jXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcblxuIyBBdHRlbXB0IHRvIHNldCBBUFBfSE9NRVxuXG4jIFJlc29sdmUgbGlua3M6ICQwIG1heSBiZSBhIGxpbmtcbmFwcF9wYXRoPSQwXG5cbiMgTmVlZCB0aGlzIGZvciBkYWlzeS1jaGFpbmVkIHN5bWxpbmtzLlxud2hpbGVcbiAgICBBUFBfSE9NRT0ke2FwcF9wYXRoJVwiJHthcHBfcGF0aCMjKi99XCJ9ICAjIGxlYXZlcyBhIHRyYWlsaW5nIC87IGVtcHR5IGlmIG5vIGxlYWRpbmcgcGF0aFxuICAgIFsgLWggXCIkYXBwX3BhdGhcIiBdXG5kb1xuICAgIGxzPSQoIGxzIC1sZCBcIiRhcHBfcGF0aFwiIClcbiAgICBsaW5rPSR7bHMjKicgLT4gJ31cbiAgICBjYXNlICRsaW5rIGluICAgICAgICAgICAgICMoXG4gICAgICAvKikgICBhcHBfcGF0aD0kbGluayA7OyAjKFxuICAgICAgKikgICAgYXBwX3BhdGg9JEFQUF9IT01FJGxpbmsgOztcbiAgICBlc2FjXG5kb25lXG5cbiMgVGhpcyBpcyBub3JtYWxseSB1bnVzZWRcbiMgc2hlbGxjaGVjayBkaXNhYmxlPVNDMjAzNFxuQVBQX0JBU0VfTkFNRT0kezAjIyovfVxuIyBEaXNjYXJkIGNkIHN0YW5kYXJkIG91dHB1dCBpbiBjYXNlICRDRFBBVEggaXMgc2V0IChodHRwczovL2dpdGh1Yi5jb20vZ3JhZGxlL2dyYWRsZS9pc3N1ZXMvMjUwMzYpXG5BUFBfSE9NRT0kKCBjZCBcIiR7QVBQX0hPTUU6LS4vfVwiID4gL2Rldi9udWxsICYmIHB3ZCAtUCApIHx8IGV4aXRcblxuIyBVc2UgdGhlIG1heGltdW0gYXZhaWxhYmxlLCBvciBzZXQgTUFYX0ZEICE9IC0xIHRvIHVzZSB0aGF0IHZhbHVlLlxuTUFYX0ZEPW1heGltdW1cblxud2FybiAoKSB7XG4gICAgZWNobyBcIiQqXCJcbn0gPiYyXG5cbmRpZSAoKSB7XG4gICAgZWNob1xuICAgIGVjaG8gXCIkKlwiXG4gICAgZWNob1xuICAgIGV4aXQgMVxufSA+JjJcblxuIyBPUyBzcGVjaWZpYyBzdXBwb3J0IChtdXN0IGJlICd0cnVlJyBvciAnZmFsc2UnKS5cbmN5Z3dpbj1mYWxzZVxubXN5cz1mYWxzZVxuZGFyd2luPWZhbHNlXG5ub25zdG9wPWZhbHNlXG5jYXNlIFwiJCggdW5hbWUgKVwiIGluICAgICAgICAgICAgICAgICMoXG4gIENZR1dJTiogKSAgICAgICAgIGN5Z3dpbj10cnVlICA7OyAjKFxuICBEYXJ3aW4qICkgICAgICAgICBkYXJ3aW49dHJ1ZSAgOzsgIyhcbiAgTVNZUyogfCBNSU5HVyogKSAgbXN5cz10cnVlICAgIDs7ICMoXG4gIE5PTlNUT1AqICkgICAgICAgIG5vbnN0b3A9dHJ1ZSA7O1xuZXNhY1xuXG5DTEFTU1BBVEg9JEFQUF9IT01FL2dyYWRsZS93cmFwcGVyL2dyYWRsZS13cmFwcGVyLmphclxuXG5cbiMgRGV0ZXJtaW5lIHRoZSBKYXZhIGNvbW1hbmQgdG8gdXNlIHRvIHN0YXJ0IHRoZSBKVk0uXG5pZiBbIC1uIFwiJEpBVkFfSE9NRVwiIF0gOyB0aGVuXG4gICAgaWYgWyAteCBcIiRKQVZBX0hPTUUvanJlL3NoL2phdmFcIiBdIDsgdGhlblxuICAgICAgICAjIElCTSdzIEpESyBvbiBBSVggdXNlcyBzdHJhbmdlIGxvY2F0aW9ucyBmb3IgdGhlIGV4ZWN1dGFibGVzXG4gICAgICAgIEpBVkFDTUQ9JEpBVkFfSE9NRS9qcmUvc2gvamF2YVxuICAgIGVsc2VcbiAgICAgICAgSkFWQUNNRD0kSkFWQV9IT01FL2Jpbi9qYXZhXG4gICAgZmlcbiAgICBpZiBbICEgLXggXCIkSkFWQUNNRFwiIF0gOyB0aGVuXG4gICAgICAgIGRpZSBcIkVSUk9SOiBKQVZBX0hPTUUgaXMgc2V0IHRvIGFuIGludmFsaWQgZGlyZWN0b3J5OiAkSkFWQV9IT01FXG5cblBsZWFzZSBzZXQgdGhlIEpBVkFfSE9NRSB2YXJpYWJsZSBpbiB5b3VyIGVudmlyb25tZW50IHRvIG1hdGNoIHRoZVxubG9jYXRpb24gb2YgeW91ciBKYXZhIGluc3RhbGxhdGlvbi5cIlxuICAgIGZpXG5lbHNlXG4gICAgSkFWQUNNRD1qYXZhXG4gICAgaWYgISBjb21tYW5kIC12IGphdmEgPi9kZXYvbnVsbCAyPiYxXG4gICAgdGhlblxuICAgICAgICBkaWUgXCJFUlJPUjogSkFWQV9IT01FIGlzIG5vdCBzZXQgYW5kIG5vICdqYXZhJyBjb21tYW5kIGNvdWxkIGJlIGZvdW5kIGluIHlvdXIgUEFUSC5cblxuUGxlYXNlIHNldCB0aGUgSkFWQV9IT01FIHZhcmlhYmxlIGluIHlvdXIgZW52aXJvbm1lbnQgdG8gbWF0Y2ggdGhlXG5sb2NhdGlvbiBvZiB5b3VyIEphdmEgaW5zdGFsbGF0aW9uLlwiXG4gICAgZmlcbmZpXG4uLi5cblxuIyBDb2xsZWN0IGFsbCBhcmd1bWVudHMgZm9yIHRoZSBqYXZhIGNvbW1hbmQsIHN0YWNraW5nIGluIHJldmVyc2Ugb3JkZXI6XG4jICAgKiBhcmdzIGZyb20gdGhlIGNvbW1hbmQgbGluZVxuIyAgICogdGhlIG1haW4gY2xhc3MgbmFtZVxuIyAgICogLWNsYXNzcGF0aFxuIyAgICogLUQuLi5hcHBuYW1lIHNldHRpbmdzXG4jICAgKiAtLW1vZHVsZS1wYXRoIChvbmx5IGlmIG5lZWRlZClcbiMgICAqIERFRkFVTFRfSlZNX09QVFMsIEpBVkFfT1BUUywgYW5kIEdSQURMRV9PUFRTIGVudmlyb25tZW50IHZhcmlhYmxlcy5cblxuIyBGb3IgQ3lnd2luIG9yIE1TWVMsIHN3aXRjaCBwYXRocyB0byBXaW5kb3dzIGZvcm1hdCBiZWZvcmUgcnVubmluZyBqYXZhXG5pZiBcIiRjeWd3aW5cIiB8fCBcIiRtc3lzXCIgOyB0aGVuXG4gICAgQVBQX0hPTUU9JCggY3lncGF0aCAtLXBhdGggLS1taXhlZCBcIiRBUFBfSE9NRVwiIClcbiAgICBDTEFTU1BBVEg9JCggY3lncGF0aCAtLXBhdGggLS1taXhlZCBcIiRDTEFTU1BBVEhcIiApXG5cbiAgICBKQVZBQ01EPSQoIGN5Z3BhdGggLS11bml4IFwiJEpBVkFDTURcIiApXG4uLi5cbiAgICAgICAgc2hpZnQgICAgICAgICAgICAgICAgICAgIyByZW1vdmUgb2xkIGFyZ1xuICAgICAgICBzZXQgLS0gXCIkQFwiIFwiJGFyZ1wiICAgICAgIyBwdXNoIHJlcGxhY2VtZW50IGFyZ1xuICAgIGRvbmVcbmZpXG5cblxuIyBBZGQgZGVmYXVsdCBKVk0gb3B0aW9ucyBoZXJlLiBZb3UgY2FuIGFsc28gdXNlIEpBVkFfT1BUUyBhbmQgR1JBRExFX09QVFMgdG8gcGFzcyBKVk0gb3B0aW9ucyB0byB0aGlzIHNjcmlwdC5cbkRFRkFVTFRfSlZNX09QVFM9J1wiLVhteDY0bVwiIFwiLVhtczY0bVwiJ1xuXG4jIENvbGxlY3QgYWxsIGFyZ3VtZW50cyBmb3IgdGhlIGphdmEgY29tbWFuZDpcbiMgICAqIERFRkFVTFRfSlZNX09QVFMsIEpBVkFfT1BUUywgSkFWQV9PUFRTLCBhbmQgb3B0c0Vudmlyb25tZW50VmFyIGFyZSBub3QgYWxsb3dlZCB0byBjb250YWluIHNoZWxsIGZyYWdtZW50cyxcbiMgICAgIGFuZCBhbnkgZW1iZWRkZWQgc2hlbGxuZXNzIHdpbGwgYmUgZXNjYXBlZC5cbiMgICAqIEZvciBleGFtcGxlOiBBIHVzZXIgY2Fubm90IGV4cGVjdCAke0hvc3RuYW1lfSB0byBiZSBleHBhbmRlZCwgYXMgaXQgaXMgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUgYW5kIHdpbGwgYmVcbiMgICAgIHRyZWF0ZWQgYXMgJyR7SG9zdG5hbWV9JyBpdHNlbGYgb24gdGhlIGNvbW1hbmQgbGluZS5cblxuc2V0IC0tIFxcXG4gICAgICAgIFwiLURvcmcuZ3JhZGxlLmFwcG5hbWU9JEFQUF9CQVNFX05BTUVcIiBcXFxuICAgICAgICAtY2xhc3NwYXRoIFwiJENMQVNTUEFUSFwiIFxcXG4gICAgICAgIG9yZy5ncmFkbGUud3JhcHBlci5HcmFkbGVXcmFwcGVyTWFpbiBcXFxuICAgICAgICBcIiRAXCJcblxuIyBTdG9wIHdoZW4gXCJ4YXJnc1wiIGlzIG5vdCBhdmFpbGFibGUuXG5pZiAhIGNvbW1hbmQgLXYgeGFyZ3MgPi9kZXYvbnVsbCAyPiYxXG50aGVuXG4gICAgZGllIFwieGFyZ3MgaXMgbm90IGF2YWlsYWJsZVwiXG5maVxuLi4uXG5cbmV2YWwgXCJzZXQgLS0gJChcbiAgICAgICAgcHJpbnRmICclc1xcbicgXCIkREVGQVVMVF9KVk1fT1BUUyAkSkFWQV9PUFRTICRHUkFETEVfT1BUU1wiIHxcbiAgICAgICAgeGFyZ3MgLW4xIHxcbiAgICAgICAgc2VkICcgc35bXi1bOmFsbnVtOl0rLC4vOj1AX11+XFxcXCZ+ZzsgJyB8XG4gICAgICAgIHRyICdcXG4nICcgJ1xuICAgIClcIiAnXCIkQFwiJ1xuXG5leGVjIFwiJEpBVkFDTURcIiBcIiRAXCJcbi4uLlxuUGF0aDogc3JjL21haW4vcmVzb3VyY2VzL3BsdWdpbi55bWxcbm5hbWU6IERldlN5c3RlbVxudmVyc2lvbjogJzEuMCdcbm1haW46IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uRGV2U3lzdGVtXG5hcGktdmVyc2lvbjogJzEuMjEnXG5hdXRob3JzOiBbIFN0ZXlPbiBdXG5kZXNjcmlwdGlvbjogT2ZmaWNpYWwgU3RleU9uIERldmVsb3BlciBTeXN0ZW0gZm9yIE1pbmVjcmFmdCBTZXJ2ZXJzXG53ZWJzaXRlOiBodHRwczovL2dpdGh1Yi5jb20vU3RleU9uXG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9hcGkvaXRlbS9JdGVtQnVpbGRlci5qYXZhXG4uLi5cblxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyIGNsZWFyQWxsQXR0cmlidXRlcygpIHtcbiAgICAgICAgdGhpcy5pdGVtU3RhY2suZWRpdE1ldGEoaXRlbU1ldGEgLT4ge1xuICAgICAgICAgICAgaXRlbU1ldGEuYWRkSXRlbUZsYWdzKEl0ZW1GbGFnLnZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBJdGVtQnVpbGRlciBhbW91bnQoaW50IGFtb3VudCkge1xuICAgICAgICB0aGlzLml0ZW1TdGFjay5zZXRBbW91bnQoYW1vdW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyIGxvcmVXcmFwKEBOb3ROdWxsIENvbXBvbmVudCBkZXNlcmlhbGl6ZSkge1xuICAgICAgICBJdGVtTWV0YSBpdGVtTWV0YSA9IGl0ZW1TdGFjay5nZXRJdGVtTWV0YSgpO1xuICAgICAgICBMaXN0PENvbXBvbmVudD4gbG9yZSA9IGl0ZW1NZXRhLmxvcmUoKTtcbiAgICAgICAgaWYgKGxvcmUgPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9yZSA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICB9XG4gICAgICAgIGxvcmUuYWRkKGRlc2VyaWFsaXplKTtcbiAgICAgICAgaXRlbU1ldGEubG9yZShsb3JlKTtcbiAgICAgICAgaXRlbVN0YWNrLnNldEl0ZW1NZXRhKGl0ZW1NZXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIEl0ZW1CdWlsZGVyIGdsb3coKXtcbiAgICAgICAgaXRlbVN0YWNrLmFkZFVuc2FmZUVuY2hhbnRtZW50KEVuY2hhbnRtZW50LkRVUkFCSUxJVFksIDEpO1xuICAgICAgICBJdGVtTWV0YSBpdGVtTWV0YSA9IGl0ZW1TdGFjay5nZXRJdGVtTWV0YSgpO1xuICAgICAgICBpdGVtTWV0YS5hZGRJdGVtRmxhZ3MoSXRlbUZsYWcuSElERV9FTkNIQU5UUyk7XG4gICAgICAgIGl0ZW1TdGFjay5zZXRJdGVtTWV0YShpdGVtTWV0YSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9TdGV5T25JbnYuamF2YVxuLi4uXG5cbnB1YmxpYyBjbGFzcyBTdGV5T25JbnYge1xuXG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgSW52ZW50b3J5IGludmVudG9yeTtcbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBBcnJheUxpc3Q8QWN0aXZlSXRlbT4gYWN0aXZlSXRlbXM7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbHVnaW4gbWFpbkNsYXNzO1xuICAgIHByaXZhdGUgZmluYWwgUGxheWVyIHBsYXllcjtcbiAgICBwcml2YXRlIGZpbmFsIGludCBzaXplO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIENvbXBvbmVudCB0aXRsZTtcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5T3BlbkV2ZW50PiBvcGVuQWN0aW9uO1xuICAgIHByaXZhdGUgSW52ZW50b3J5RXZlbnRMaXN0ZW5lciBsaXN0ZW5lcjtcbiAgICBAR2V0dGVyXG4gICAgcHVibGljIENvbnN1bWVyPEludmVudG9yeUNsb3NlRXZlbnQ+IGNsb3NlQWN0aW9uO1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIFN0cmluZ1tdIHBhdHRlcm47XG4uLi5cblBhdGg6IHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9EZXZTeXN0ZW0uamF2YVxucGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtO1xuXG5pbXBvcnQgb3JnLmJ1a2tpdC5wbHVnaW4uamF2YS5KYXZhUGx1Z2luO1xuXG5wdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBvbkVuYWJsZSgpIHtcbiAgICAgICAgLy8gUGx1Z2luIHN0YXJ0dXAgbG9naWNcblxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIG9uRGlzYWJsZSgpIHtcbiAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgfVxufVxuLi4uXG5QYXRoOiBzcmMvbWFpbi9qYXZhL2RlL3N0ZXlvbi9kZXZTeXN0ZW0vYXBpL2ludi9SaW9uSW52LmphdmFcbi4uLlxuXG5wdWJsaWMgY2xhc3MgUmlvbkludiB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBmaW5hbCBJbnZlbnRvcnkgaW52ZW50b3J5O1xuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIGZpbmFsIEFycmF5TGlzdDxBY3RpdmVJdGVtPiBhY3RpdmVJdGVtcztcbiAgICBwcml2YXRlIGZpbmFsIFBsdWdpbiBtYWluQ2xhc3M7XG4gICAgcHJpdmF0ZSBmaW5hbCBQbGF5ZXIgcGxheWVyO1xuICAgIHByaXZhdGUgZmluYWwgaW50IHNpemU7XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgZmluYWwgQ29tcG9uZW50IHRpdGxlO1xuICAgIHB1YmxpYyBDb25zdW1lcjxJbnZlbnRvcnlPcGVuRXZlbnQ+IG9wZW5BY3Rpb247XG4gICAgcHJpdmF0ZSBJbnZlbnRvcnlFdmVudExpc3RlbmVyIGxpc3RlbmVyO1xuICAgIEBHZXR0ZXJcbiAgICBwdWJsaWMgQ29uc3VtZXI8SW52ZW50b3J5Q2xvc2VFdmVudD4gY2xvc2VBY3Rpb247XG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgU3RyaW5nW10gcGF0dGVybjtcbi4uLlxuUGF0aDogc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL2FwaS9pbnYvaXRlbS9BY3RpdmVJdGVtLmphdmFcbi4uLlxuXG5AR2V0dGVyXG5wdWJsaWMgY2xhc3MgQWN0aXZlSXRlbSB7XG5cbiAgICBwcml2YXRlIGZpbmFsIEl0ZW1TdGFjayBpdGVtU3RhY2s7XG4gICAgcHJpdmF0ZSBDb25zdW1lcjxJbnZlbnRvcnlDbGlja0V2ZW50PiBhY3Rpb247XG5cbiAgICBwdWJsaWMgQWN0aXZlSXRlbShJdGVtU3RhY2sgaXRlbVN0YWNrKSB7XG4gICAgICAgIHRoaXMuaXRlbVN0YWNrID0gaXRlbVN0YWNrO1xuICAgIH1cblxuICAgIHB1YmxpYyBBY3RpdmVJdGVtIGNsaWNrKENvbnN1bWVyPEludmVudG9yeUNsaWNrRXZlbnQ+IGFjdGlvbikge1xuICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4odGhpcy5oYXNoQ29kZSgpICsgXCIgXCIgKyBcImFjdGl2ZUl0ZW1IYXNoQ29kZUluQWN0aXZlSXRlbUNsYXNzXCIgKyB0aGlzLml0ZW1TdGFjay5nZXRUeXBlKCkubmFtZSgpKTtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIEBFdmVudEhhbmRsZXJcbiAgICBwdWJsaWMgdm9pZCBoYW5kbGVDbGljayhJbnZlbnRvcnlDbGlja0V2ZW50IGV2ZW50KSB7XG4gICAgICAgIGlmIChhY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgYWN0aW9uLmFjY2VwdChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYjQ0ZTFlOWUtOWI3Ni00MDY1LTliODgtMzMxODdmZDQ0MzBmO3Rvb2x1X3ZydHhfMDFNWGJDRWE0ZDVCQjRKOUNpdk1uVXJWIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlBhcnRpYWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhLiBTZWUgYmVsb3cgZm9yIGRldGFpbHMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5ObyByZXBsYWNlbWVudCB3YXMgcGVyZm9ybWVkLCBvbGRTdHIgZGlkIG5vdCBhcHBlYXIgdmVyYmF0aW0gaW4gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhLlxuVGhlIGNvbnRlbnQgaW4gdGhlIHNwZWNpZmllZCByZWdpb24gaXM6XG4gICAgMTVcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxNlx0XG4gICAgMTdcdCAgICB9XG4gICAgMThcdFxuICAgIDE5XHQgICAgQE92ZXJyaWRlXG4gICAgMjBcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjFcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjJcdCAgICB9XG4gICAgMjNcdFxuICAgIDI0XHRcbiAgICAyNVx0ICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyIGdldEludmVudG9yeU1hbmFnZXIoKSB7XG4gICAgMjZcdCAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgMjdcdCAgICB9XG4gICAgMjhcdH1cbiAgICAyOVx0XG5cbkRpZmYgYmV0d2VlbiBvbGRTdHIgYW5kIHRoZSBzcGVjaWZpZWQgcmVnaW9uIGlzOlxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLS0tIG9sZFN0clxuKysrIHJlZ2lvbkNvbnRlbnRcbkBAIC0zLDEwICszLDkgQEBcbiAgICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgICB9XG4gXG4tICAgIC8qKlxuLSAgICAgKiBHZXQgdGhlIGludmVudG9yeSBtYW5hZ2VyIGluc3RhbmNlXG4tICAgICAqIEByZXR1cm4gVGhlIGludmVudG9yeSBtYW5hZ2VyXG4tICAgICAqL1xuK1xuICAgICBwdWJsaWMgSW52ZW50b3J5TWFuYWdlciBnZXRJbnZlbnRvcnlNYW5hZ2VyKCkge1xuICAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgIH1cbit9XG4rXG5cblxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzFdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDFcdHBhY2thZ2UgZGUuc3RleW9uLmRldlN5c3RlbTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBkZS5zdGV5b24uZGV2U3lzdGVtLmFwaS5pbnYuY29udHJvbGxlci5JbnZlbnRvcnlNYW5hZ2VyO1xuICAgICA0XHRpbXBvcnQgbG9tYm9rLkdldHRlcjtcbiAgICAgNVx0aW1wb3J0IG9yZy5idWtraXQucGx1Z2luLmphdmEuSmF2YVBsdWdpbjtcbiAgICAgNlx0XG4gICAgIDdcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAgOFx0XG4gICAgIDlcdHB1YmxpYyBmaW5hbCBjbGFzcyBEZXZTeXN0ZW0gZXh0ZW5kcyBKYXZhUGx1Z2luIHtcbiAgICAxMFx0XG4gICAgMTFcdCAgICBAR2V0dGVyXG5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1syXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICA3XHRpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG4gICAgIDhcdFxuICAgICA5XHRwdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XG4gICAgMTBcdFxuICAgIDExXHQgICAgQEdldHRlclxuICAgIDEyXHQgICAgcHJpdmF0ZSBJbnZlbnRvcnlNYW5hZ2VyIGludmVudG9yeU1hbmFnZXI7XG4gICAgMTNcdFxuICAgIDE0XHRcbiAgICAxNVx0ICAgIEBPdmVycmlkZVxuICAgIDE2XHQgICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG5cbkZpeCBmYWlsZWQgc3RyX3JlcGxhY2VfZW50cmllcyBhY2NvcmRpbmdseSBhbmQgdHJ5IGFnYWluLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiM2E3ODY5ZGUtZWZmZS00ODM1LTlhZDItMDZhMmUwODc1MWIzO3Rvb2x1X3ZydHhfMDFGcHpTS0wzc0NtaUNGcmNIcWlMNDRzIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGRlLnN0ZXlvbi5kZXZTeXN0ZW07XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZGUuc3RleW9uLmRldlN5c3RlbS5hcGkuaW52LmNvbnRyb2xsZXIuSW52ZW50b3J5TWFuYWdlcjtcbiAgICAgNFx0aW1wb3J0IGxvbWJvay5HZXR0ZXI7XG4gICAgIDVcdGltcG9ydCBvcmcuYnVra2l0LnBsdWdpbi5qYXZhLkphdmFQbHVnaW47XG4gICAgIDZcdFxuICAgICA3XHRpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG4gICAgIDhcdFxuICAgICA5XHRwdWJsaWMgZmluYWwgY2xhc3MgRGV2U3lzdGVtIGV4dGVuZHMgSmF2YVBsdWdpbiB7XG4gICAgMTBcdFxuICAgIDExXHQgICAgQEdldHRlclxuICAgIDEyXHQgICAgcHJpdmF0ZSBJbnZlbnRvcnlNYW5hZ2VyIGludmVudG9yeU1hbmFnZXI7XG4gICAgMTNcdFxuICAgIDE0XHRcbiAgICAxNVx0ICAgIEBPdmVycmlkZVxuICAgIDE2XHQgICAgcHVibGljIHZvaWQgb25FbmFibGUoKSB7XG4gICAgMTdcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxOFx0XG4gICAgMTlcdCAgICB9XG4gICAgMjBcdFxuICAgIDIxXHQgICAgQE92ZXJyaWRlXG4gICAgMjJcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjNcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjRcdCAgICB9XG4gICAgMjVcdFxuICAgIDI2XHRcbiAgICAyN1x0ICAgIHB1YmxpYyBJbnZlbnRvcnlNYW5hZ2VyIGdldEludmVudG9yeU1hbmFnZXIoKSB7XG4gICAgMjhcdCAgICAgICAgcmV0dXJuIGludmVudG9yeU1hbmFnZXI7XG4gICAgMjlcdCAgICB9XG4gICAgMzBcdH1cbiAgICAzMVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzMVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZDI3Y2VjOTctOGVjMS00MWU3LWFhYWItMjQ5YWI0YTQyZThkO3Rvb2x1X3ZydHhfMDE0VFg3d043ZXZKTGNyMWRpQVlLREhmIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL21haW4vamF2YS9kZS9zdGV5b24vZGV2U3lzdGVtL0RldlN5c3RlbS5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgMTdcdCAgICAgICAgdGhpcy5pbnZlbnRvcnlNYW5hZ2VyID0gbmV3IEludmVudG9yeU1hbmFnZXIodGhpcywgbmV3IEhhc2hNYXA8PigpKTtcbiAgICAxOFx0XG4gICAgMTlcdCAgICB9XG4gICAgMjBcdFxuICAgIDIxXHQgICAgQE92ZXJyaWRlXG4gICAgMjJcdCAgICBwdWJsaWMgdm9pZCBvbkRpc2FibGUoKSB7XG4gICAgMjNcdCAgICAgICAgLy8gUGx1Z2luIHNodXRkb3duIGxvZ2ljXG4gICAgMjRcdCAgICB9XG4gICAgMjVcdH1cbiAgICAyNlx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjU2ZWNmNjY1LTBjYmItNGIyOS04ZGNjLTA5MDNjNWM1NGY3NDt0b29sdV92cnR4XzAxTldFU0dvYzJhU044U3ZhTXRTcUxnTSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9tYWluL2phdmEvZGUvc3RleW9uL2RldlN5c3RlbS9EZXZTeXN0ZW0uamF2YTpcbiAgICAgMVx0cGFja2FnZSBkZS5zdGV5b24uZGV2U3lzdGVtO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGRlLnN0ZXlvbi5kZXZTeXN0ZW0uYXBpLmludi5jb250cm9sbGVyLkludmVudG9yeU1hbmFnZXI7XG4gICAgIDRcdGltcG9ydCBsb21ib2suR2V0dGVyO1xuICAgICA1XHRpbXBvcnQgb3JnLmJ1a2tpdC5wbHVnaW4uamF2YS5KYXZhUGx1Z2luO1xuICAgICA2XHRcbiAgICAgN1x0aW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuICAgICA4XHRcbiAgICAgOVx0cHVibGljIGZpbmFsIGNsYXNzIERldlN5c3RlbSBleHRlbmRzIEphdmFQbHVnaW4ge1xuICAgIDEwXHRcbiAgICAxMVx0ICAgIEBHZXR0ZXJcbiAgICAxMlx0ICAgIHByaXZhdGUgSW52ZW50b3J5TWFuYWdlciBpbnZlbnRvcnlNYW5hZ2VyO1xuICAgIDEzXHRcbiAgICAxNFx0XG4gICAgMTVcdCAgICBAT3ZlcnJpZGVcbiAgICAxNlx0ICAgIHB1YmxpYyB2b2lkIG9uRW5hYmxlKCkge1xuICAgIDE3XHQgICAgICAgIHRoaXMuaW52ZW50b3J5TWFuYWdlciA9IG5ldyBJbnZlbnRvcnlNYW5hZ2VyKHRoaXMsIG5ldyBIYXNoTWFwPD4oKSk7XG4gICAgMThcdFxuICAgIDE5XHQgICAgfVxuICAgIDIwXHRcbiAgICAyMVx0ICAgIEBPdmVycmlkZVxuICAgIDIyXHQgICAgcHVibGljIHZvaWQgb25EaXNhYmxlKCkge1xuICAgIDIzXHQgICAgICAgIC8vIFBsdWdpbiBzaHV0ZG93biBsb2dpY1xuICAgIDI0XHQgICAgfVxuICAgIDI1XHR9XG4gICAgMjZcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMjZcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX19LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6dHJ1ZSwiZXh0cmFEYXRhIjp7ImlzQWdlbnRDb252ZXJzYXRpb24iOnRydWUsImhhc0FnZW50T25ib2FyZGVkIjp0cnVlLCJoYXNEaXJ0eUVkaXRzIjp0cnVlfX19LCJhZ2VudEV4ZWN1dGlvbk1vZGUiOiJtYW51YWwiLCJpc0FnZW50RWRpdHNDb2xsYXBzZWQiOnRydWV9" />
      </map>
    </option>
  </component>
</project>